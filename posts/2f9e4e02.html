<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>提升文章速度(多镜像) | 垂天云</title><meta name="keywords" content="笔记"><meta name="author" content="归,crl@cnortles.top"><meta name="copyright" content="归"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="提升文章速度(多镜像)"><meta name="application-name" content="提升文章速度(多镜像)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="提升文章速度(多镜像)"><meta property="og:url" content="https://www.cnortles.top/posts/2f9e4e02.html"><meta property="og:site_name" content="垂天云"><meta property="og:description" content="介绍 一个基于规则驱动的前端路由拦截器 用规则定义黑科技    ClientWorker 能干什么？ 绕备，在域名不变动的情况下，其余用户所有请求均可以定向到你的其他服务器或者 cdn，而首屏域名无需 ICP 备案。 降本，你可以用廉价的家宽+公网 ipv4&amp;#x2F;ipv6，即使是 80&amp;amp;#x2"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://project.cnortles.top/file/img/cover/cover_15.bmp"><meta property="article:author" content="归"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://project.cnortles.top/file/img/cover/cover_15.bmp"><meta name="description" content="介绍 一个基于规则驱动的前端路由拦截器 用规则定义黑科技    ClientWorker 能干什么？ 绕备，在域名不变动的情况下，其余用户所有请求均可以定向到你的其他服务器或者 cdn，而首屏域名无需 ICP 备案。 降本，你可以用廉价的家宽+公网 ipv4&amp;#x2F;ipv6，即使是 80&amp;amp;#x2"><link rel="shortcut icon" href="https://cdn.cnortles.top/favicon.ico"><link rel="canonical" href="https://www.cnortles.top/posts/2f9e4e02"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="pkPtc0pLaeW5CGaLq_odZ-MQnwpvd7xO5m6WCcoiYW0"/><meta name="baidu-site-verification" content="code-G8RJdQfpmN"/><meta name="bytedance-verification-code" content="RALleLZCNUvmz8rMWsuG"/><meta name="sogou_site_verification" content="CCSrIkgALf"/><meta name="360-site-verification" content="148e4038953c0d0f38c2980fcb128b84"/><meta name="Petal-Search-site-verification" content="9191977d80"/><meta name="shenma-site-verification" content="8741f25b2ef580e39e96a5a85b32c6a4_1664965737"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/128.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/128.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/128.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="https://cdn.cnortles.top/npm/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cnortles.top/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cnortles.top/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cnortles.top/npm/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a27ca3a593d5473a7b0e1f0433436f5b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "ik0xejnuoo");</script><script>const GLOBAL_CONFIG = {
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 黑洞把服务器带走了！","backTitle":"♪(^∇^*)骗你的！"},
  LA51: {"enable":true,"ck":"JkcBsOFTTB5LJIqW","LingQueMonitorID":"Jpz0wjokEI7p09no"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo.cnortles.top/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"80e12c5151fa7209d50e71105dd999b2","mailMd5":""},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"cdn","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":null},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"本文已经有","messageNext":"未更新，部分内容可能失去时效性"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 归","link":"链接: ","source":"来源: 垂天云","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cnortles.top/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.cnortles.top/npm/flickr-justified-gallery/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '垂天云',
  title: '提升文章速度(多镜像)',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-09 14:07:25',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="dns-prefetch" href="https://cdn.cnortles.top/" /><link rel="dns-prefetch" href="https://at.alicdn.com/" /><link rel="dns-prefetch" href="https://unpkg.com/" /><link rel="dns-prefetch" href="https://api.cnortles.top/" /><link rel="dns-prefetch" href="https://img.cnortles.top/" /><script src="https://cdn-go.cn/aegis/aegis-sdk/latest/aegis.min.js"></script><script src="https://cdn-go.cn/aegis/aegis-sdk/latest/aegis.min.js"></script><script defer type="text/javascript" src="https://api.cnortles.top/ip?v=2" ></script><script data-pjax defer type="text/javascript" src="https://cdn.cnortles.top/npm/sweetalert2/dist/sweetalert2.all.js"></script><script charset="UTF-8"  src="/custom/js/func.js" ></script><script charset="UTF-8"  src="/custom/js/index.js" ></script><script charset="UTF-8"  src="/custom/js/day.min.js" ></script><script charset="UTF-8"  src="https://cdn.cnortles.top/npm/hexo-cnortles-source@1.8.2/js/utill.js" ></script><link rel="stylesheet" href="/custom/css/footer.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/custom/css/index.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cnortles.top/npm/hexo-cnortles-source@1.8.2/css/icon.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://cdn.cnortles.top/0.webp"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>if (GLOBAL_CONFIG.preloader.source == "2" || GLOBAL_CONFIG.preloader.source == "3") {
  const loadingPercentage = document.getElementById("loading-percentage");
  let loadingPercentageTimer = setInterval(function() {
    var progressBar = document.querySelector(".pace-progress");
    if (!progressBar) return
    var currentValue = progressBar.getAttribute("data-progress-text");
    if (currentValue !== loadingPercentage.textContent) {
      loadingPercentage.textContent = currentValue;
      if (currentValue === "100%") {
        clearInterval(loadingPercentageTimer);
      }
    }
  }, 100);
}

const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cnortles.top/npm/anzhiyu-theme-static/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cnortles.top/npm/pace-js/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="/#/" title="个人主页（建设中）"><img class="back-menu-item-icon" src="https://index.anzhiy.cn/assets/home.svg" alt="个人主页（建设中）"/><span class="back-menu-item-text">个人主页（建设中）</span></a><a class="back-menu-item" href="https://www.cnortles.top" title="博客"><img class="back-menu-item-icon" src="https://img02.anzhiy.cn/adminuploads/1/2022/09/05/6315ec9737ac4.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">程序</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://pan.cnortles.top" title="网盘"><img class="back-menu-item-icon" src="https://index.anzhiy.cn/assets/home.svg" alt="网盘"/><span class="back-menu-item-text">网盘</span></a><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://music.cnortles.top" title="音乐"><img class="back-menu-item-icon" src="https://img02.anzhiy.cn/adminuploads/1/2022/09/05/6315ec9737ac4.png" alt="音乐"/><span class="back-menu-item-text">音乐</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">垂天云</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fas fa-archive faa-tada"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fas fa-shapes faa-tada"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fas fa-tags faa-tada"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="fas fa-link faa-tada"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="fas fa-envelope faa-tada"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="fas fa-music faa-tada"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg><span> 追番页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="fas fa-shoe-prints faa-tada"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.cnortles.top/npm/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="wechat" src="https://cdn.cnortles.top/npm/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://cdn.cnortles.top/npm/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="alipay" src="https://cdn.cnortles.top/npm/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> <span>最新评论</span></span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">音乐</div><span class="author-content-item-title">灵魂的碰撞💥</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">九月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url">笔记</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>笔记</span></a></span></div></div><h1 class="post-title" itemprop="name headline">提升文章速度(多镜像)<a class="post-edit-link" href="NaN/edit/" title="在 语雀 上编辑 - 提升文章速度(多镜像)" target="_blank"><i class="anzhiyufont anzhiyu-icon-pencil"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-08-27T12:14:04.000Z" title="发表于 2022-08-27 20:14:04">2022-08-27</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-07-09T06:07:25.453Z" title="更新于 2023-07-09 14:07:25">2023-07-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">12.9k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>76分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="提升文章速度(多镜像)"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://project.cnortles.top/file/img/cover/cover_15.bmp"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.cnortles.top/posts/2f9e4e02.html"><header><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url">笔记</a><a href="/tags/%E7%AC%94%E8%AE%B0/" tabindex="-1" itemprop="url">笔记</a><h1 id="CrawlerTitle" itemprop="name headline">提升文章速度(多镜像)</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">归</span><time itemprop="dateCreated datePublished" datetime="2022-08-27T12:14:04.000Z" title="发表于 2022-08-27 20:14:04">2022-08-27</time><time itemprop="dateCreated datePublished" datetime="2023-07-09T06:07:25.453Z" title="更新于 2023-07-09 14:07:25">2023-07-09</time></header><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><blockquote>
<p>一个基于规则驱动的前端路由拦截器</p>
<p>用规则定义黑科技</p>
</blockquote>
<a class="ghcard" rel="external nofollow noopener noreferrer noopener" target="_blank" href="https://github.com/ChenYFan/ClientWorker"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github-readme-stats.vercel.app/api/pin/?username=ChenYFan&repo=ClientWorker&theme=great-gatsby&show_owner=true"/></a>

<h2 id="ClientWorker-能干什么？"><a href="#ClientWorker-能干什么？" class="headerlink" title="ClientWorker 能干什么？"></a>ClientWorker 能干什么？</h2><ol>
<li>绕备，在域名不变动的情况下，其余用户所有请求均可以定向到你的其他服务器或者 cdn，而首屏域名无需 ICP 备案。</li>
<li>降本，你可以用廉价的家宽+公网 ipv4&#x2F;ipv6，即使是 80&#x2F;443 被封锁，你也可以在不变动端口的情况下将用户流量引向家宽。</li>
<li>白嫖，可以用免费的公网穿透服务，接近零成本托管你的服务。</li>
<li>加速，将静态资源流量（乃至动态资源）<strong>并发</strong>到全球 cdn，实现前端级负载均衡。</li>
<li>绕禁，通过在前端修改标头的方式，修复被故意篡改的 MIME，正常托管网站，绕过各大托管商对于网站部署的限制，可以毫无负担的使用阿里云、腾讯云等对象存储而不用开启网站模式，乃至 GithubRaw 无限流量（绕过 GithubPage 100GB 限制）。</li>
<li>愈合：通过并发方式，辅助 JSDelivr、Unpkg、cdnjs 等大陆几乎不可达请求重定向至其他 cdn，从而实现无修改、全球加速。</li>
<li>不宕，即使首屏服务器离线或不可达，已访问过的用户依旧可以正常命中备用服务器。</li>
<li>缓存，颗粒化控制缓存，多种情况不同选择，智能调度缓存和请求，避免有缓存时无返回、缓存无法及时更新问题，确保缓存在客户端工作的更顺畅。</li>
<li>离线，可以迅速支撑普通离线应用，助力快速构建 PWA。</li>
<li>兼容，Webp 无缝，可以通过判断标头来判断是否支持 Webp，并且自动替换图片请求，为网站加速助力。</li>
<li>审核，通过内置的规则可以屏蔽并替换、拦截敏感词汇，实现网站内容安全。</li>
<li>无刷，你不需要刷新就可以激活 ClientWorker</li>
<li>热更，即使源站完全宕机，你也可以更新用户手中的 ClientWorker 与配置，确保网站正常运行。</li>
<li>切片，对于一个请求发起多个切片以提高单文件下载速度</li>
<li>叠速，专门为 ClientWorker 开发的 KFCThursdayVW50 引擎能在浏览器端切片并同时并发不同的镜像服务器，对于下载大文件可以带宽叠加的效果。</li>
<li>均衡，对多个镜像并发，选择最优的镜像服务器，保证网站的响应速度，同时达到负载均衡的目的。</li>
<li>高度自定义…更多玩法等你挖掘</li>
</ol>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h2><p>在网站<code>source</code>目录下创建<code>cw.js</code>文件</p>
<h3 id="外部链接"><a href="#外部链接" class="headerlink" title="外部链接"></a>外部链接</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">importScripts(<span class="string">&quot;https://lib.baomitu.com/clientworker/latest/dist/cw.js&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">importScripts(</span><br><span class="line">  <span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/clientworker/2.8.1/dist/cw.js&quot;</span></span><br><span class="line">); <span class="comment">//请及时替换2.4.0为最新版本号</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">importScripts(<span class="string">&quot;https://cdn.jsdelivr.net/npm/clientworker@latest&quot;</span>); <span class="comment">//最好指定版本</span></span><br><span class="line">importScripts(</span><br><span class="line">  <span class="string">&quot;https://cdn.jsdelivr.net/gh/chenyfan/clientworker@gh-pages/cw.js&quot;</span></span><br><span class="line">); <span class="comment">////最好指定版本</span></span><br></pre></td></tr></table></figure>

<h3 id="本地"><a href="#本地" class="headerlink" title="本地"></a>本地</h3><p><code>注意: 本文在此的文件为3.0版本,请及时更新</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">()=&gt;</span>&#123;<span class="keyword">var</span> __webpack_modules__=&#123;<span class="number">385</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="property">exports</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">function</span> <span class="title function_">e</span>(<span class="params">e,t</span>)&#123;<span class="variable language_">this</span>.<span class="property">namespace</span>=e||<span class="string">&quot;CacheDBDefaultNameSpace&quot;</span>,<span class="variable language_">this</span>.<span class="property">prefix</span>=t||<span class="string">&quot;CacheDBDefaultPrefix&quot;</span>,<span class="variable language_">this</span>.<span class="property">read</span>=<span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">return</span> t=t||&#123;<span class="attr">type</span>:<span class="string">&quot;text&quot;</span>&#125;,<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">n,r</span>)=&gt;</span>&#123;caches.<span class="title function_">open</span>(<span class="variable language_">this</span>.<span class="property">namespace</span>).<span class="title function_">then</span>((<span class="function"><span class="params">r</span>=&gt;</span>&#123;r.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">`https://<span class="subst">$&#123;<span class="variable language_">this</span>.prefix&#125;</span>/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(e)&#125;</span>`</span>)).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="keyword">switch</span>(t.<span class="property">type</span>)&#123;<span class="keyword">case</span><span class="string">&quot;json&quot;</span>:<span class="keyword">return</span> <span class="keyword">void</span> <span class="title function_">n</span>(e.<span class="title function_">json</span>());<span class="keyword">case</span><span class="string">&quot;arrayBuffer&quot;</span>:<span class="keyword">return</span> <span class="keyword">void</span> <span class="title function_">n</span>(e.<span class="title function_">arrayBuffer</span>());<span class="keyword">case</span><span class="string">&quot;blob&quot;</span>:<span class="keyword">return</span> <span class="keyword">void</span> <span class="title function_">n</span>(e.<span class="title function_">blob</span>());<span class="attr">default</span>:<span class="keyword">return</span> <span class="keyword">void</span> <span class="title function_">n</span>(e.<span class="title function_">text</span>())&#125;&#125;)).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">n</span>(<span class="literal">null</span>)&#125;))&#125;))&#125;))&#125;,<span class="variable language_">this</span>.<span class="property">write</span>=<span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">e,t,n</span>)&#123;<span class="keyword">return</span> n=n||&#123;<span class="attr">type</span>:<span class="string">&quot;text&quot;</span>&#125;,<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">r,i</span>)=&gt;</span>&#123;caches.<span class="title function_">open</span>(<span class="variable language_">this</span>.<span class="property">namespace</span>).<span class="title function_">then</span>((<span class="function"><span class="params">i</span>=&gt;</span>&#123;i.<span class="title function_">put</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">`https://<span class="subst">$&#123;<span class="variable language_">this</span>.prefix&#125;</span>/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(e)&#125;</span>`</span>),<span class="keyword">new</span> <span class="title class_">Response</span>(t,&#123;<span class="attr">headers</span>:&#123;<span class="string">&quot;Content-Type&quot;</span>:(<span class="function">()=&gt;</span>&#123;<span class="keyword">switch</span>(n.<span class="property">type</span>)&#123;<span class="keyword">case</span><span class="string">&quot;json&quot;</span>:<span class="keyword">return</span><span class="string">&quot;application/json&quot;</span>;<span class="keyword">case</span><span class="string">&quot;arrayBuffer&quot;</span>:<span class="keyword">case</span><span class="string">&quot;blob&quot;</span>:<span class="keyword">return</span><span class="string">&quot;application/octet-stream&quot;</span>;<span class="attr">default</span>:<span class="keyword">return</span><span class="string">&quot;text/plain&quot;</span>&#125;&#125;)()&#125;&#125;)).<span class="title function_">then</span>(<span class="title function_">r</span>(!<span class="number">0</span>)).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">r</span>(!<span class="number">1</span>)&#125;))&#125;))&#125;))&#125;,<span class="variable language_">this</span>.<span class="property">delete</span>=<span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">t,n</span>)=&gt;</span>&#123;caches.<span class="title function_">open</span>(<span class="variable language_">this</span>.<span class="property">namespace</span>).<span class="title function_">then</span>((<span class="function"><span class="params">n</span>=&gt;</span>&#123;n.<span class="title function_">delete</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">`https://<span class="subst">$&#123;<span class="variable language_">this</span>.prefix&#125;</span>/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(e)&#125;</span>`</span>)).<span class="title function_">then</span>(<span class="title function_">t</span>(!<span class="number">0</span>)).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">t</span>(!<span class="number">1</span>)&#125;))&#125;))&#125;))&#125;&#125;<span class="keyword">return</span> e&#125;()&#125;,<span class="number">710</span>:<span class="function">(<span class="params">__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__</span>)=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;__webpack_require__.<span class="title function_">d</span>(__webpack_exports__,&#123;<span class="attr">Z</span>:<span class="function">()=&gt;</span>__WEBPACK_DEFAULT_EXPORT__&#125;);<span class="keyword">var</span> js_yaml__WEBPACK_IMPORTED_MODULE_0__=<span class="title function_">__webpack_require__</span>(<span class="number">272</span>),_chenyfan_cache_db__WEBPACK_IMPORTED_MODULE_1__=<span class="title function_">__webpack_require__</span>(<span class="number">385</span>),_utils_engine_js__WEBPACK_IMPORTED_MODULE_2__=<span class="title function_">__webpack_require__</span>(<span class="number">671</span>),_package_json__WEBPACK_IMPORTED_MODULE_3__=<span class="title function_">__webpack_require__</span>(<span class="number">147</span>);<span class="keyword">const</span> <span class="title function_">router_cgi</span>=<span class="keyword">async</span> request=&gt;&#123;<span class="keyword">const</span> db=<span class="keyword">new</span> _chenyfan_cache_db__WEBPACK_IMPORTED_MODULE_1__,urlStr=request.<span class="property">url</span>.<span class="title function_">toString</span>(),urlObj=<span class="keyword">new</span> <span class="title function_">URL</span>(urlStr),pathname=urlObj.<span class="property">pathname</span>,q=<span class="function"><span class="params">e</span>=&gt;</span>urlObj.<span class="property">searchParams</span>.<span class="title function_">get</span>(e);<span class="keyword">let</span> config;<span class="keyword">switch</span>(pathname.<span class="title function_">split</span>(<span class="string">&quot;/&quot;</span>)[<span class="number">2</span>])&#123;<span class="keyword">case</span><span class="string">&quot;hello&quot;</span>:<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Hello ClientWorker!&quot;</span>);<span class="keyword">case</span><span class="string">&quot;info&quot;</span>:<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;<span class="attr">version</span>:_package_json__WEBPACK_IMPORTED_MODULE_3__.<span class="property">i8</span>&#125;),&#123;<span class="attr">headers</span>:&#123;<span class="string">&quot;Content-Type&quot;</span>:<span class="string">&quot;application/json&quot;</span>&#125;&#125;);<span class="keyword">case</span><span class="string">&quot;page&quot;</span>:<span class="keyword">return</span><span class="string">&quot;install&quot;</span>===<span class="title function_">q</span>(<span class="string">&quot;type&quot;</span>)?<span class="title function_">fetch</span>(<span class="string">&quot;/404&quot;</span>):<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Error, page type not found&quot;</span>);<span class="keyword">case</span><span class="string">&quot;api&quot;</span>:<span class="keyword">switch</span>(<span class="title function_">q</span>(<span class="string">&quot;type&quot;</span>))&#123;<span class="keyword">case</span><span class="string">&quot;config&quot;</span>:<span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="title function_">q</span>(<span class="string">&quot;url&quot;</span>)||<span class="string">&quot;/config.yaml&quot;</span>).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>e.<span class="title function_">text</span>())).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>js_yaml__WEBPACK_IMPORTED_MODULE_0__.<span class="property">ZP</span>.<span class="title function_">load</span>(e))).<span class="title function_">then</span>((<span class="keyword">async</span> e=&gt;(<span class="keyword">await</span> db.<span class="title function_">write</span>(<span class="string">&quot;config&quot;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(e),&#123;<span class="attr">type</span>:<span class="string">&quot;json&quot;</span>&#125;),<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;ok&quot;</span>)))).<span class="title function_">catch</span>((<span class="keyword">async</span> e=&gt;(<span class="keyword">await</span> db.<span class="title function_">write</span>(<span class="string">&quot;config&quot;</span>,<span class="string">&quot;&quot;</span>),<span class="keyword">new</span> <span class="title class_">Response</span>(e))));<span class="keyword">case</span><span class="string">&quot;clear&quot;</span>:<span class="keyword">return</span> caches.<span class="title function_">open</span>(<span class="string">&quot;ClientWorker_ResponseCache&quot;</span>).<span class="title function_">then</span>((<span class="keyword">async</span> e=&gt;e.<span class="title function_">keys</span>().<span class="title function_">then</span>((<span class="keyword">async</span> t=&gt;(<span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(t.<span class="title function_">map</span>((<span class="function"><span class="params">t</span>=&gt;</span>&#123;e.<span class="title function_">delete</span>(t)&#125;))),<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;ok&quot;</span>))))));<span class="keyword">case</span><span class="string">&quot;hotpatch&quot;</span>:<span class="keyword">if</span>(config=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="keyword">await</span> db.<span class="title function_">read</span>(<span class="string">&quot;config&quot;</span>)),<span class="string">&quot;object&quot;</span>!=<span class="keyword">typeof</span> config.<span class="property">hotpatch</span>)<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Error, config.hotpatch not found&quot;</span>);<span class="keyword">const</span> hotpatch=config.<span class="property">hotpatch</span>;<span class="keyword">return</span> <span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">parallel</span>(hotpatch).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>e.<span class="title function_">text</span>())).<span class="title function_">then</span>((<span class="keyword">async</span> script=&gt;&#123;<span class="keyword">await</span> db.<span class="title function_">write</span>(<span class="string">&quot;hotpatch&quot;</span>,script,&#123;<span class="attr">type</span>:<span class="string">&quot;text&quot;</span>&#125;),<span class="built_in">eval</span>(script)&#125;)),<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;ok&quot;</span>);<span class="keyword">case</span><span class="string">&quot;hotconfig&quot;</span>:<span class="keyword">if</span>(config=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="keyword">await</span> db.<span class="title function_">read</span>(<span class="string">&quot;config&quot;</span>)),<span class="string">&quot;object&quot;</span>!=<span class="keyword">typeof</span> config.<span class="property">hotconfig</span>)<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Error, config.hotconfig not found&quot;</span>);<span class="keyword">const</span> hotconfig=config.<span class="property">hotconfig</span>,nConfig=<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">parallel</span>(hotconfig).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>e.<span class="title function_">text</span>())).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>js_yaml__WEBPACK_IMPORTED_MODULE_0__.<span class="property">ZP</span>.<span class="title function_">load</span>(e))).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span><span class="title class_">JSON</span>.<span class="title function_">stringify</span>(e))).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span><span class="string">&quot;&quot;</span>));<span class="keyword">return</span> nConfig&amp;&amp;<span class="keyword">await</span> db.<span class="title function_">write</span>(<span class="string">&quot;config&quot;</span>,nConfig),<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;ok&quot;</span>);<span class="attr">default</span>:<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Error, api type not found&quot;</span>)&#125;<span class="attr">default</span>:<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;Not Found!, Client Worker!&quot;</span>)&#125;&#125;,__WEBPACK_DEFAULT_EXPORT__=router_cgi&#125;,<span class="number">755</span>:<span class="function">(<span class="params">__unused_webpack___webpack_module__,__unused_webpack___webpack_exports__,__webpack_require__</span>)=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;<span class="keyword">var</span> _cgi_js__WEBPACK_IMPORTED_MODULE_0__=<span class="title function_">__webpack_require__</span>(<span class="number">710</span>),_chenyfan_cache_db__WEBPACK_IMPORTED_MODULE_1__=<span class="title function_">__webpack_require__</span>(<span class="number">385</span>),_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__=<span class="title function_">__webpack_require__</span>(<span class="number">70</span>),_utils_engine_js__WEBPACK_IMPORTED_MODULE_3__=<span class="title function_">__webpack_require__</span>(<span class="number">671</span>),_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__=<span class="title function_">__webpack_require__</span>(<span class="number">431</span>);self.<span class="property">clientworkerhandle</span>=<span class="keyword">async</span> request=&gt;&#123;<span class="keyword">const</span> domain=<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="string">&quot;&quot;</span>).<span class="property">url</span>).<span class="property">host</span>,db=<span class="keyword">new</span> _chenyfan_cache_db__WEBPACK_IMPORTED_MODULE_1__;<span class="keyword">let</span> tReq=request;<span class="keyword">const</span> urlStr=tReq.<span class="property">url</span>.<span class="title function_">toString</span>(),urlObj=<span class="keyword">new</span> <span class="title function_">URL</span>(urlStr),pathname=urlObj.<span class="property">pathname</span>;<span class="keyword">if</span>(<span class="string">&quot;cw-cgi&quot;</span>===pathname.<span class="title function_">split</span>(<span class="string">&quot;/&quot;</span>)[<span class="number">1</span>])<span class="keyword">return</span>(<span class="number">0</span>,_cgi_js__WEBPACK_IMPORTED_MODULE_0__.<span class="property">Z</span>)(request);<span class="keyword">const</span> config=<span class="keyword">await</span> db.<span class="title function_">read</span>(<span class="string">&quot;config&quot;</span>,&#123;<span class="attr">type</span>:<span class="string">&quot;json&quot;</span>&#125;);<span class="keyword">if</span>(!config)<span class="keyword">return</span> <span class="title function_">fetch</span>(request);<span class="keyword">let</span> tFetched=!<span class="number">1</span>,<span class="title class_">EngineFetch</span>=!<span class="number">1</span>,fetchConfig=&#123;&#125;,<span class="title class_">EngineFetchList</span>=[],tRes=<span class="keyword">new</span> <span class="title class_">Response</span>;<span class="keyword">for</span>(<span class="keyword">let</span> catch_rule <span class="keyword">of</span> config.<span class="property">catch_rules</span>)<span class="keyword">if</span>(<span class="string">&quot;_&quot;</span>===catch_rule.<span class="property">rule</span>&amp;&amp;(catch_rule.<span class="property">rule</span>=domain),tReq.<span class="property">url</span>.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(catch_rule.<span class="property">rule</span>)))<span class="keyword">for</span>(<span class="keyword">let</span> transform_rule <span class="keyword">of</span> catch_rule.<span class="property">transform_rules</span>)&#123;<span class="keyword">let</span> tSearched=!<span class="number">1</span>;<span class="keyword">switch</span>(<span class="string">&quot;_&quot;</span>===transform_rule.<span class="property">search</span>&amp;&amp;(transform_rule.<span class="property">search</span>=catch_rule.<span class="property">rule</span>),transform_rule.<span class="property">searchin</span>||<span class="string">&quot;url&quot;</span>)&#123;<span class="keyword">case</span><span class="string">&quot;url&quot;</span>:tReq.<span class="property">url</span>.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">search</span>,transform_rule.<span class="property">searchflags</span>))&amp;&amp;(tSearched=!<span class="number">0</span>);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;header&quot;</span>:tReq.<span class="property">headers</span>.<span class="title function_">get</span>(transform_rule.<span class="property">searchkey</span>).<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">search</span>,transform_rule.<span class="property">searchflags</span>))&amp;&amp;(tSearched=!<span class="number">0</span>);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;status&quot;</span>:<span class="keyword">if</span>(!tFetched)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is not fetched yet,the status rule are ignored`</span>);<span class="keyword">break</span>&#125;<span class="title class_">String</span>(tRes.<span class="property">status</span>).<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">search</span>,transform_rule.<span class="property">searchflags</span>))&amp;&amp;(tSearched=!<span class="number">0</span>);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;statusText&quot;</span>:<span class="keyword">if</span>(!tFetched)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is not fetched yet,the statusText rule are ignored`</span>);<span class="keyword">break</span>&#125;tRes.<span class="property">statusText</span>.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">search</span>,transform_rule.<span class="property">searchflags</span>))&amp;&amp;(tSearched=!<span class="number">0</span>);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;body&quot;</span>:<span class="keyword">if</span>(!tFetched)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is not fetched yet,the body rule are ignored`</span>);<span class="keyword">break</span>&#125;(<span class="keyword">await</span> tRes.<span class="title function_">clone</span>().<span class="title function_">text</span>()).<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">search</span>,transform_rule.<span class="property">searchflags</span>))&amp;&amp;(tSearched=!<span class="number">0</span>);<span class="keyword">break</span>;<span class="attr">default</span>:_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> the <span class="subst">$&#123;transform_rule.searchin&#125;</span> search rule are not supported`</span>)&#125;<span class="keyword">switch</span>(transform_rule.<span class="property">replacein</span>||<span class="string">&quot;url&quot;</span>)&#123;<span class="keyword">case</span><span class="string">&quot;url&quot;</span>:<span class="keyword">if</span>(tFetched&amp;&amp;tSearched)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is already fetched,the url transform rule:<span class="subst">$&#123;transform_rule.search&#125;</span> are ignored`</span>);<span class="keyword">break</span>&#125;<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>!==transform_rule.<span class="property">replace</span>&amp;&amp;tSearched)<span class="keyword">if</span>(<span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">replace</span>)<span class="title class_">EngineFetch</span>&amp;&amp;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`EngineFetch Disabled for <span class="subst">$&#123;tReq.url&#125;</span>,the request will downgrade to normal fetch`</span>),tReq=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">request</span>(tReq,&#123;<span class="attr">url</span>:tReq.<span class="property">url</span>.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">replacekey</span>||transform_rule.<span class="property">search</span>,transform_rule.<span class="property">replaceflags</span>),transform_rule.<span class="property">replace</span>)&#125;),<span class="title class_">EngineFetch</span>=!<span class="number">1</span>;<span class="keyword">else</span>&#123;<span class="keyword">if</span>(<span class="title class_">EngineFetch</span>)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`Replacement cannot be used for <span class="subst">$&#123;tReq.url&#125;</span>,the request is already powered by fetch-engine `</span>);<span class="keyword">break</span>&#125;transform_rule.<span class="property">replace</span>.<span class="title function_">forEach</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="string">&quot;_&quot;</span>!==e?<span class="title class_">EngineFetchList</span>.<span class="title function_">push</span>(_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">request</span>(tReq,&#123;<span class="attr">url</span>:tReq.<span class="property">url</span>.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">replacekey</span>||transform_rule.<span class="property">search</span>,transform_rule.<span class="property">replaceflags</span>),e)&#125;)):<span class="title class_">EngineFetchList</span>.<span class="title function_">push</span>(tReq)&#125;)),<span class="title class_">EngineFetch</span>=!<span class="number">0</span>&#125;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;body&quot;</span>:tSearched&amp;&amp;(tFetched?tRes=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">response</span>(tRes,&#123;<span class="attr">body</span>:(<span class="keyword">await</span> tRes.<span class="title function_">clone</span>().<span class="title function_">text</span>()).<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">replacekey</span>||transform_rule.<span class="property">search</span>,transform_rule.<span class="property">replaceflags</span>),transform_rule.<span class="property">replace</span>)&#125;):tReq=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">request</span>(tReq,&#123;<span class="attr">body</span>:(<span class="keyword">await</span> tReq.<span class="title function_">clone</span>().<span class="title function_">text</span>()).<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">replacekey</span>||transform_rule.<span class="property">search</span>,transform_rule.<span class="property">replaceflags</span>),transform_rule.<span class="property">replace</span>)&#125;));<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;status&quot;</span>:<span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">replace</span>&amp;&amp;tSearched&amp;&amp;(tRes=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">response</span>(tRes,&#123;<span class="attr">status</span>:tRes.<span class="property">status</span>.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">replacekey</span>||transform_rule.<span class="property">search</span>,transform_rule.<span class="property">replaceflags</span>),transform_rule.<span class="property">replace</span>)&#125;));<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;statusText&quot;</span>:<span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">replace</span>&amp;&amp;tSearched&amp;&amp;(tRes=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">response</span>(tRes,&#123;<span class="attr">statusText</span>:tRes.<span class="property">statusText</span>.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">replacekey</span>||transform_rule.<span class="property">search</span>,transform_rule.<span class="property">replaceflags</span>),transform_rule.<span class="property">replace</span>)&#125;));<span class="keyword">break</span>;<span class="attr">default</span>:_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> the <span class="subst">$&#123;transform_rule.replacein&#125;</span> replace rule are not supported`</span>)&#125;<span class="keyword">if</span>(tSearched)&#123;<span class="keyword">if</span>(<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">header</span>)<span class="keyword">for</span>(<span class="keyword">var</span> header <span class="keyword">in</span> transform_rule.<span class="property">header</span>)tFetched?tRes=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">response</span>(tRes,&#123;<span class="attr">headers</span>:&#123;[header]:transform_rule.<span class="property">header</span>[header]&#125;&#125;):tReq=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">request</span>(tReq,&#123;<span class="attr">headers</span>:&#123;[header]:transform_rule.<span class="property">header</span>[header]&#125;&#125;);<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>!==transform_rule.<span class="property">action</span>)<span class="keyword">switch</span>(transform_rule.<span class="property">action</span>)&#123;<span class="keyword">case</span><span class="string">&quot;skip&quot;</span>:<span class="keyword">return</span> <span class="title function_">fetch</span>(request);<span class="keyword">case</span><span class="string">&quot;fetch&quot;</span>:<span class="keyword">if</span>(tFetched)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is already fetched,the fetch action are ignored`</span>);<span class="keyword">break</span>&#125;<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>===transform_rule.<span class="property">fetch</span>)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`Fetch Config is not defined for <span class="subst">$&#123;tReq.url&#125;</span>`</span>);<span class="keyword">break</span>&#125;<span class="keyword">if</span>(fetchConfig=&#123;<span class="attr">status</span>:transform_rule.<span class="property">fetch</span>.<span class="property">status</span>,<span class="attr">mode</span>:transform_rule.<span class="property">fetch</span>.<span class="property">mode</span>,<span class="attr">credentials</span>:transform_rule.<span class="property">fetch</span>.<span class="property">credentials</span>,<span class="attr">redirect</span>:transform_rule.<span class="property">fetch</span>.<span class="property">redirect</span>,<span class="attr">timeout</span>:transform_rule.<span class="property">fetch</span>.<span class="property">timeout</span>,<span class="attr">threads</span>:transform_rule.<span class="property">fetch</span>.<span class="property">threads</span>,<span class="attr">limit</span>:transform_rule.<span class="property">fetch</span>.<span class="property">limit</span>&#125;,!transform_rule.<span class="property">fetch</span>.<span class="property">preflight</span>)<span class="keyword">for</span>(<span class="keyword">var</span> eReq <span class="keyword">in</span> tReq=<span class="keyword">new</span> <span class="title class_">Request</span>(tReq.<span class="property">url</span>,&#123;<span class="attr">method</span>:(method=tReq.<span class="property">method</span>,<span class="string">&quot;GET&quot;</span>===method||<span class="string">&quot;HEAD&quot;</span>===method||<span class="string">&quot;POST&quot;</span>===method?<span class="attr">method</span>:<span class="string">&quot;GET&quot;</span>),<span class="attr">body</span>:(body=tReq.<span class="property">body</span>,<span class="string">&quot;POST&quot;</span>===tReq.<span class="property">method</span>?<span class="attr">body</span>:<span class="literal">null</span>)&#125;),<span class="keyword">delete</span> fetchConfig.<span class="property">credentials</span>,<span class="title class_">EngineFetchList</span>)<span class="title class_">EngineFetchList</span>[eReq]=<span class="keyword">new</span> <span class="title class_">Request</span>(<span class="title class_">EngineFetchList</span>[eReq].<span class="property">url</span>,tReq);tRes=<span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="title function_">async</span>(res,rej)=&gt;&#123;<span class="keyword">const</span> <span class="title function_">EngineFetcher</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;<span class="keyword">let</span> cRes;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="title function_">async</span>(resolve,reject)=&gt;&#123;<span class="keyword">if</span>(<span class="title class_">EngineFetch</span>)<span class="keyword">switch</span>(transform_rule.<span class="property">fetch</span>.<span class="property">engine</span>||<span class="string">&quot;parallel&quot;</span>)&#123;<span class="keyword">case</span><span class="string">&quot;classic&quot;</span>:cRes=<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_3__.<span class="property">Z</span>.<span class="title function_">classic</span>(<span class="title class_">EngineFetchList</span>,fetchConfig);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;parallel&quot;</span>:cRes=<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_3__.<span class="property">Z</span>.<span class="title function_">parallel</span>(<span class="title class_">EngineFetchList</span>,fetchConfig);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;KFCThursdayVW50&quot;</span>:<span class="number">4</span>===(<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getDay</span>()&amp;&amp;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">&quot;VW50! The Best Fetch Engine in the World Said!&quot;</span>),cRes=<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_3__.<span class="property">Z</span>.<span class="title class_">KFCThursdayVW</span>50(<span class="title class_">EngineFetchList</span>,fetchConfig);<span class="keyword">break</span>;<span class="attr">default</span>:_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`Fetch Engine <span class="subst">$&#123;transform_rule.fetch.engine&#125;</span> is not supported`</span>)&#125;<span class="keyword">else</span> <span class="keyword">switch</span>(transform_rule.<span class="property">fetch</span>.<span class="property">engine</span>||<span class="string">&quot;fetch&quot;</span>)&#123;<span class="keyword">case</span><span class="string">&quot;fetch&quot;</span>:cRes=<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_3__.<span class="property">Z</span>.<span class="title function_">fetch</span>(tReq,fetchConfig);<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;crazy&quot;</span>:cRes=<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_3__.<span class="property">Z</span>.<span class="title function_">crazy</span>(tReq,fetchConfig);<span class="keyword">break</span>;<span class="attr">default</span>:_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> the <span class="subst">$&#123;transform_rule.fetch.engine&#125;</span> engine are not supported`</span>)&#125;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">fetch</span>.<span class="property">cache</span>&amp;&amp;cRes.<span class="property">status</span>===(transform_rule.<span class="property">fetch</span>.<span class="property">status</span>||<span class="number">200</span>)?(cRes=_utils_rebuild_js__WEBPACK_IMPORTED_MODULE_4__.<span class="property">Z</span>.<span class="title function_">response</span>(cRes,&#123;<span class="attr">headers</span>:&#123;<span class="title class_">ClientWorker</span><span class="attr">_ExpireTime</span>:(<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getTime</span>()+<span class="title class_">Number</span>(<span class="built_in">eval</span>(transform_rule.<span class="property">fetch</span>.<span class="property">cache</span>.<span class="property">expire</span>||<span class="string">&quot;0&quot;</span>))&#125;&#125;),caches.<span class="title function_">open</span>(<span class="string">&quot;ClientWorker_ResponseCache&quot;</span>).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="title function_">put</span>(tReq,cRes.<span class="title function_">clone</span>()).<span class="title function_">then</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">resolve</span>(cRes)&#125;))&#125;))):<span class="title function_">resolve</span>(cRes)&#125;))&#125;;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">fetch</span>.<span class="property">cache</span>?caches.<span class="title function_">open</span>(<span class="string">&quot;ClientWorker_ResponseCache&quot;</span>).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="title function_">match</span>(tReq).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="keyword">if</span>(e)&#123;<span class="keyword">if</span>(<span class="title class_">Number</span>(e.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;ClientWorker_ExpireTime&quot;</span>))&gt;(<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getTime</span>())<span class="keyword">return</span> _utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">s</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is fetched from cache`</span>),<span class="keyword">void</span> <span class="title function_">res</span>(e);_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is expired.`</span>),<span class="title function_">res</span>(<span class="title class_">Promise</span>.<span class="title function_">any</span>([<span class="title class_">EngineFetcher</span>(),<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="title function_">async</span>(t,n)=&gt;&#123;<span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span>&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is too late to fetch,even though the cache has expired,so return by cache`</span>),<span class="title function_">t</span>(e)&#125;),transform_rule.<span class="property">fetch</span>.<span class="property">cache</span>.<span class="property">delay</span>||<span class="number">3e3</span>)&#125;))]))&#125;<span class="keyword">else</span> _utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`<span class="subst">$&#123;tReq.url&#125;</span> is not cached!And it is too late to fetch!`</span>),<span class="title function_">res</span>(<span class="title class_">EngineFetcher</span>())&#125;))&#125;)):<span class="title function_">res</span>(<span class="title class_">EngineFetcher</span>())&#125;)),tFetched=!<span class="number">0</span>;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">&quot;redirect&quot;</span>:<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>===transform_rule.<span class="property">redirect</span>)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`Redirect Config is not defined for <span class="subst">$&#123;tReq.url&#125;</span>`</span>);<span class="keyword">break</span>&#125;<span class="keyword">return</span><span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">redirect</span>.<span class="property">url</span>?<span class="title class_">Response</span>.<span class="title function_">redirect</span>(transform_rule.<span class="property">redirect</span>.<span class="property">url</span>,transform_rule.<span class="property">redirect</span>.<span class="property">status</span>||<span class="number">301</span>):<span class="title class_">Response</span>.<span class="title function_">redirect</span>(tReq.<span class="property">url</span>.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(transform_rule.<span class="property">search</span>),transform_rule.<span class="property">redirect</span>.<span class="property">to</span>),transform_rule.<span class="property">redirect</span>.<span class="property">status</span>||<span class="number">301</span>);<span class="keyword">case</span><span class="string">&quot;return&quot;</span>:<span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>===transform_rule.<span class="property">return</span>&amp;&amp;(transform_rule.<span class="property">return</span>=&#123;&#125;),<span class="keyword">new</span> <span class="title class_">Response</span>(transform_rule.<span class="property">return</span>.<span class="property">body</span>||<span class="string">&quot;Error!&quot;</span>,&#123;<span class="attr">status</span>:transform_rule.<span class="property">return</span>.<span class="property">status</span>||<span class="number">503</span>,<span class="attr">headers</span>:transform_rule.<span class="property">return</span>.<span class="property">headers</span>||&#123;&#125;&#125;);<span class="keyword">case</span><span class="string">&quot;script&quot;</span>:<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>===transform_rule.<span class="property">script</span>)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`Script Config is not defined for <span class="subst">$&#123;tReq.url&#125;</span>`</span>);<span class="keyword">break</span>&#125;<span class="keyword">if</span>(<span class="string">&quot;string&quot;</span>==<span class="keyword">typeof</span> transform_rule.<span class="property">script</span>.<span class="property">function</span>)&#123;<span class="keyword">const</span> <span class="title class_">ClientWorkerAnonymousFunctionName</span>=<span class="string">`ClientWorker_AnonymousFunction_<span class="subst">$&#123;(<span class="keyword">new</span> <span class="built_in">Date</span>).getTime()&#125;</span>`</span>;self[<span class="title class_">ClientWorkerAnonymousFunctionName</span>]=<span class="built_in">eval</span>(transform_rule.<span class="property">script</span>.<span class="property">function</span>),transform_rule.<span class="property">script</span>.<span class="property">name</span>=<span class="title class_">ClientWorkerAnonymousFunctionName</span>&#125;<span class="keyword">const</span> <span class="title class_">ScriptAns</span>=<span class="keyword">await</span> <span class="title class_">Function</span>(<span class="string">&quot;return (&quot;</span>+transform_rule.<span class="property">script</span>.<span class="property">name</span>+<span class="string">&quot;)&quot;</span>)()(&#123;<span class="attr">fetched</span>:tFetched,<span class="attr">request</span>:tReq,<span class="attr">response</span>:tRes&#125;);<span class="keyword">if</span>(<span class="title class_">ScriptAns</span>.<span class="property">fetched</span>)&#123;<span class="keyword">if</span>(transform_rule.<span class="property">script</span>.<span class="property">skip</span>)<span class="keyword">return</span> <span class="title class_">ScriptAns</span>.<span class="property">response</span>;tFetched=!<span class="number">0</span>,tRes=<span class="title class_">ScriptAns</span>.<span class="property">response</span>&#125;<span class="keyword">else</span> tReq=<span class="title class_">ScriptAns</span>.<span class="property">request</span>;<span class="keyword">break</span>;<span class="attr">default</span>:_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`This Action:<span class="subst">$&#123;transform_rule.action&#125;</span> is not supported yet`</span>)&#125;&#125;&#125;<span class="keyword">var</span> body,method;<span class="keyword">return</span> tFetched||(<span class="keyword">new</span> <span class="title function_">URL</span>(tReq.<span class="property">url</span>).<span class="property">host</span>!==domain&amp;&amp;(tRes=<span class="keyword">await</span> <span class="title function_">fetch</span>(tReq)),tRes=<span class="title class_">EngineFetch</span>?<span class="keyword">await</span> _utils_engine_js__WEBPACK_IMPORTED_MODULE_3__.<span class="property">Z</span>.<span class="title function_">parallel</span>(<span class="title class_">EngineFetchList</span>,fetchConfig||&#123;&#125;):<span class="keyword">await</span> <span class="title function_">fetch</span>(tReq.<span class="property">url</span>,&#123;<span class="attr">method</span>:tReq.<span class="property">method</span>.<span class="title function_">match</span>(<span class="regexp">/^(GET|HEAD|POST)$/g</span>)?tReq.<span class="property">method</span>:<span class="string">&quot;GET&quot;</span>,<span class="attr">body</span>:tReq.<span class="property">method</span>.<span class="title function_">match</span>(<span class="regexp">/^(POST)$/g</span>)?tReq.<span class="property">body</span>:<span class="keyword">void</span> <span class="number">0</span>&#125;)),tRes&#125;;<span class="keyword">var</span> __WEBPACK_DEFAULT_EXPORT__=&#123;&#125;&#125;,<span class="number">70</span>:<span class="function">(<span class="params">e,t,n</span>)=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;n.<span class="title function_">d</span>(t,&#123;<span class="attr">Z</span>:<span class="function">()=&gt;</span>r&#125;);<span class="keyword">const</span> r=&#123;<span class="attr">s</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`%c[SUCCESS]%c <span class="subst">$&#123;e&#125;</span>`</span>,<span class="string">&quot;color:white;background:green;&quot;</span>,<span class="string">&quot;&quot;</span>)&#125;,<span class="attr">w</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`%c[WARNING]%c <span class="subst">$&#123;e&#125;</span>`</span>,<span class="string">&quot;color:brown;background:yellow;&quot;</span>,<span class="string">&quot;&quot;</span>)&#125;,<span class="attr">i</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`%c[INFO]%c <span class="subst">$&#123;e&#125;</span>`</span>,<span class="string">&quot;color:white;background:blue;&quot;</span>,<span class="string">&quot;&quot;</span>)&#125;,<span class="attr">e</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`%c[ERROR]%c <span class="subst">$&#123;e&#125;</span>`</span>,<span class="string">&quot;color:white;background:red;&quot;</span>,<span class="string">&quot;&quot;</span>)&#125;,<span class="attr">d</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`%c[DEBUG]%c <span class="subst">$&#123;e&#125;</span>`</span>,<span class="string">&quot;color:white;background:black;&quot;</span>,<span class="string">&quot;&quot;</span>)&#125;&#125;&#125;,<span class="number">671</span>:<span class="function">(<span class="params">e,t,n</span>)=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;n.<span class="title function_">d</span>(t,&#123;<span class="attr">Z</span>:<span class="function">()=&gt;</span>o&#125;);<span class="keyword">var</span> r=<span class="title function_">n</span>(<span class="number">70</span>),i=<span class="title function_">n</span>(<span class="number">431</span>);<span class="title class_">Promise</span>.<span class="property">any</span>||(<span class="title class_">Promise</span>.<span class="property">any</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">t,n</span>)=&gt;</span>&#123;<span class="keyword">let</span> r=(e=<span class="title class_">Array</span>.<span class="title function_">isArray</span>(e)?<span class="attr">e</span>:[]).<span class="property">length</span>,i=[];<span class="keyword">if</span>(<span class="number">0</span>===r)<span class="keyword">return</span> <span class="title function_">n</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(<span class="string">&quot;All promises were rejected&quot;</span>));e.<span class="title function_">forEach</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">t</span>(e)&#125;),(<span class="function"><span class="params">e</span>=&gt;</span>&#123;r--,i.<span class="title function_">push</span>(e),<span class="number">0</span>===r&amp;&amp;<span class="title function_">n</span>(<span class="keyword">new</span> <span class="title class_">AggregateError</span>(i))&#125;))&#125;))&#125;))&#125;);<span class="keyword">const</span> a=&#123;<span class="attr">fetch</span>:<span class="title function_">async</span>(e,t)=&gt;(t=t||&#123;<span class="attr">status</span>:<span class="number">200</span>&#125;,<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">n,r</span>)=&gt;</span>&#123;<span class="keyword">const</span> i=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e);<span class="string">&quot;[object String]&quot;</span>!==i&amp;&amp;<span class="string">&quot;[object Request]&quot;</span>!==i&amp;&amp;<span class="title function_">r</span>(<span class="string">`FetchEngine.fetch: req must be a string or Request object,but got <span class="subst">$&#123;i&#125;</span>`</span>),<span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">r</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine Fetch&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;))&#125;),t.<span class="property">timeout</span>||<span class="number">5e3</span>),<span class="title function_">fetch</span>(e,&#123;<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>&#125;).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">n</span>(e)&#125;)).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">r</span>(e)&#125;))&#125;))),<span class="attr">crazy</span>:<span class="title function_">async</span>(e,t)=&gt;&#123;(t=t||&#123;<span class="attr">status</span>:<span class="number">200</span>&#125;).<span class="property">threads</span>=t.<span class="property">threads</span>||<span class="number">4</span>,t.<span class="property">trylimit</span>=t.<span class="property">trylimit</span>||<span class="number">10</span>;<span class="keyword">const</span> n=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e);<span class="keyword">if</span>(<span class="string">&quot;[object String]&quot;</span>!==n&amp;&amp;<span class="string">&quot;[object Request]&quot;</span>!==n)<span class="keyword">return</span> <span class="keyword">void</span> r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.fetch: req must be a string or Request object,but got <span class="subst">$&#123;n&#125;</span>`</span>);<span class="keyword">const</span> o=<span class="keyword">new</span> <span class="title class_">AbortController</span>,s=<span class="keyword">await</span> <span class="title function_">fetch</span>(e,&#123;<span class="attr">signal</span>:o.<span class="property">signal</span>,<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>&#125;),c=s.<span class="property">headers</span>,l=c.<span class="title function_">get</span>(<span class="string">&quot;Content-Length&quot;</span>);<span class="keyword">return</span> s.<span class="property">status</span>!==(t.<span class="property">status</span>||<span class="number">200</span>)?<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine Crazy&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;):(o.<span class="title function_">abort</span>(),!l||l&lt;t.<span class="property">threads</span>?(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.crazy: The Origin is not support Crazy Mode,or the size of the file is less than <span class="subst">$&#123;t.threads&#125;</span> bytes,downgrade to normal fetch`</span>),a.<span class="title function_">fetch</span>(e,t)):<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">n,r</span>)=&gt;</span>&#123;<span class="keyword">const</span> a=<span class="built_in">parseInt</span>(l/t.<span class="property">threads</span>),o=[];<span class="keyword">for</span>(<span class="keyword">let</span> n=<span class="number">0</span>;n&lt;t.<span class="property">threads</span>;n++)o.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="title function_">async</span>(o,s)=&gt;&#123;<span class="keyword">let</span> c=<span class="number">1</span>;<span class="keyword">const</span> <span class="title function_">l</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;c+=<span class="number">1</span>;<span class="keyword">const</span> o=i.<span class="property">Z</span>.<span class="title function_">request</span>(e,&#123;<span class="attr">headers</span>:&#123;<span class="title class_">Range</span>:<span class="string">`bytes=<span class="subst">$&#123;n*a&#125;</span>-<span class="subst">$&#123;(n+<span class="number">1</span>)*a-<span class="number">1</span>&#125;</span>`</span>&#125;,<span class="attr">url</span>:e.<span class="property">url</span>&#125;);<span class="keyword">return</span> <span class="title function_">fetch</span>(o,&#123;<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>&#125;).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>e.<span class="title function_">arrayBuffer</span>())).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="keyword">if</span>(!(c&gt;=t.<span class="property">trylimit</span>))<span class="keyword">return</span> <span class="title function_">l</span>();<span class="title function_">r</span>()&#125;))&#125;;<span class="title function_">o</span>(<span class="title function_">l</span>())&#125;)));<span class="title class_">Promise</span>.<span class="title function_">all</span>(o).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="keyword">const</span> t=[];<span class="keyword">for</span>(<span class="keyword">let</span> n=<span class="number">0</span>;n&lt;e.<span class="property">length</span>;n++)t.<span class="title function_">push</span>(e[n]);<span class="title function_">n</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>(t),&#123;<span class="attr">headers</span>:c,<span class="attr">status</span>:<span class="number">200</span>,<span class="attr">statusText</span>:<span class="string">&quot;OK&quot;</span>&#125;))&#125;)),<span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">r</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine Crazy&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;))&#125;),t.<span class="property">timeout</span>||<span class="number">5e3</span>)&#125;)))&#125;,<span class="title class_">KFCThursdayVW</span>50:<span class="title function_">async</span>(e,t)=&gt;&#123;(t=t||&#123;<span class="attr">status</span>:<span class="number">200</span>&#125;).<span class="property">threads</span>=t.<span class="property">threads</span>||<span class="number">4</span>,t.<span class="property">trylimit</span>=t.<span class="property">trylimit</span>||<span class="number">10</span>;<span class="keyword">const</span> n=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e);<span class="keyword">if</span>(<span class="string">&quot;[object String]&quot;</span>===n||<span class="string">&quot;[object Request]&quot;</span>===n)<span class="keyword">return</span> r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">&quot;FetchEngine.KFCThursdayVW50: reqs is a string or Request object,downgrade to crazy&quot;</span>),a.<span class="title function_">crazy</span>(e,t);<span class="keyword">if</span>(<span class="string">&quot;[object Array]&quot;</span>!==n)<span class="keyword">return</span> r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.KFCThursdayVW50: reqs must be a string or Request object or an array,but got <span class="subst">$&#123;n&#125;</span>`</span>),<span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">`FetchEngine.KFCThursdayVW50: reqs must be a string or Request object or an array,but got <span class="subst">$&#123;n&#125;</span>`</span>);<span class="keyword">if</span>(<span class="string">&quot;[object Array]&quot;</span>===n&amp;&amp;(<span class="number">0</span>===e.<span class="property">length</span>&amp;&amp;(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">&quot;FetchEngine.KFCThursdayVW50: reqs array is empty&quot;</span>),<span class="title function_">reject</span>()),<span class="number">1</span>===e.<span class="property">length</span>))<span class="keyword">return</span> r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">&quot;FetchEngine.KFCThursdayVW50: reqs array is only one,downgrade to crazy&quot;</span>),a.<span class="title function_">crazy</span>(e[<span class="number">0</span>],t);<span class="keyword">const</span> o=<span class="keyword">new</span> <span class="title class_">AbortController</span>,s=<span class="keyword">await</span> a.<span class="title function_">parallel</span>(e,&#123;<span class="attr">signal</span>:o.<span class="property">signal</span>,<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>,<span class="attr">timeout</span>:t.<span class="property">timeout</span>||<span class="number">3e4</span>&#125;),c=s.<span class="property">headers</span>,l=c.<span class="title function_">get</span>(<span class="string">&quot;Content-Length&quot;</span>);<span class="keyword">return</span> s.<span class="property">status</span>!==(t.<span class="property">status</span>||<span class="number">200</span>)&amp;&amp;<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine KFCThursdayVW50&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;)),o.<span class="title function_">abort</span>(),!l||l&lt;t.<span class="property">threads</span>?(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.KFCThursdayVW50: The Origin is not support KFCThursdayVW50 Mode,or the size of the file is less than <span class="subst">$&#123;t.threads&#125;</span> bytes,downgrade to normal fetch`</span>),a.<span class="title function_">fetch</span>(e,t)):<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">n,o</span>)=&gt;</span>&#123;<span class="keyword">const</span> s=<span class="built_in">parseInt</span>(l/t.<span class="property">threads</span>),u=[];<span class="keyword">for</span>(<span class="keyword">let</span> n=<span class="number">0</span>;n&lt;t.<span class="property">threads</span>;n++)u.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="title function_">async</span>(c,l)=&gt;&#123;<span class="keyword">let</span> u=<span class="number">1</span>;<span class="keyword">const</span> <span class="title function_">p</span>=<span class="keyword">async</span>(<span class="params"></span>)=&gt;&#123;u+=<span class="number">1</span>;<span class="keyword">const</span> c=[];<span class="keyword">return</span> e.<span class="title function_">forEach</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;c.<span class="title function_">push</span>(i.<span class="property">Z</span>.<span class="title function_">request</span>(e,&#123;<span class="attr">headers</span>:&#123;<span class="title class_">Range</span>:<span class="string">`bytes=<span class="subst">$&#123;n*s&#125;</span>-<span class="subst">$&#123;(n+<span class="number">1</span>)*s-<span class="number">1</span>&#125;</span>`</span>&#125;,<span class="attr">url</span>:e.<span class="property">url</span>&#125;))&#125;)),a.<span class="title function_">parallel</span>(c,&#123;<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>,<span class="attr">timeout</span>:t.<span class="property">timeout</span>||<span class="number">3e4</span>,<span class="attr">status</span>:<span class="number">206</span>&#125;).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>e.<span class="title function_">arrayBuffer</span>())).<span class="title function_">catch</span>((<span class="keyword">async</span> e=&gt;&#123;<span class="keyword">if</span>(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.KFCThursdayVW50: <span class="subst">$&#123;<span class="keyword">await</span> e.text()&#125;</span>`</span>),!(u&gt;=t.<span class="property">trylimit</span>))<span class="keyword">return</span> <span class="title function_">p</span>();<span class="title function_">o</span>()&#125;))&#125;;<span class="title function_">c</span>(<span class="title function_">p</span>())&#125;)));<span class="title class_">Promise</span>.<span class="title function_">all</span>(u).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="keyword">const</span> t=[];<span class="keyword">for</span>(<span class="keyword">let</span> n=<span class="number">0</span>;n&lt;e.<span class="property">length</span>;n++)t.<span class="title function_">push</span>(e[n]);<span class="title function_">n</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>(t),&#123;<span class="attr">headers</span>:c,<span class="attr">status</span>:<span class="number">200</span>,<span class="attr">statusText</span>:<span class="string">&quot;OK&quot;</span>&#125;))&#125;)),<span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">o</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine KFCThursdayVW50&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;))&#125;),t.<span class="property">timeout</span>||<span class="number">3e4</span>)&#125;))&#125;,<span class="attr">classic</span>:<span class="title function_">async</span>(e,t)=&gt;<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">n,i</span>)=&gt;</span>&#123;t=t||&#123;<span class="attr">status</span>:<span class="number">200</span>&#125;;<span class="keyword">const</span> o=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e);<span class="string">&quot;[object String]&quot;</span>===o||<span class="string">&quot;[object Request]&quot;</span>===o?(r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`FetchEngine.classic: reqs should be an array,but got <span class="subst">$&#123;o&#125;</span>,this request will downgrade to normal fetch`</span>),<span class="title function_">n</span>(a.<span class="title function_">fetch</span>(e,t))):<span class="string">&quot;[object Array]&quot;</span>!==o?(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.classic: reqs must be a string , Request or Array object,but got <span class="subst">$&#123;o&#125;</span>`</span>),<span class="title function_">i</span>()):<span class="string">&quot;[object Array]&quot;</span>===o&amp;&amp;(<span class="number">0</span>===o.<span class="property">length</span>&amp;&amp;(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">&quot;FetchEngine.classic: reqs array is empty&quot;</span>),<span class="title function_">i</span>()),<span class="number">1</span>===o.<span class="property">length</span>&amp;&amp;(r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">&quot;FetchEngine.classic: reqs array is only one element,this request will downgrade to normal fetch&quot;</span>),<span class="title function_">n</span>(a.<span class="title function_">fetch</span>(e[<span class="number">0</span>],t))));<span class="keyword">const</span> s=<span class="keyword">new</span> <span class="title class_">AbortController</span>,c=<span class="keyword">async</span> e=&gt;<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="keyword">await</span> e.<span class="title function_">arrayBuffer</span>(),&#123;<span class="attr">status</span>:e.<span class="property">status</span>,<span class="attr">headers</span>:e.<span class="property">headers</span>,<span class="attr">statusText</span>:e.<span class="property">statusText</span>&#125;);<span class="title class_">Promise</span>.<span class="title function_">any</span>(e.<span class="title function_">map</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="title function_">fetch</span>(e,&#123;<span class="attr">signal</span>:s.<span class="property">signal</span>,<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>&#125;).<span class="title function_">then</span>(c).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="property">status</span>==(t.<span class="property">status</span>||<span class="number">200</span>)&amp;&amp;(s.<span class="title function_">abort</span>(),<span class="title function_">n</span>(e))&#125;)).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="string">&quot;DOMException: The user aborted a request.&quot;</span>==e&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">log</span>()&#125;))&#125;))),<span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">i</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine Classic&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;))&#125;),t.<span class="property">timeout</span>||<span class="number">5e3</span>)&#125;)),<span class="attr">parallel</span>:<span class="title function_">async</span>(e,t)=&gt;<span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function">(<span class="params">n,o</span>)=&gt;</span>&#123;t=t||&#123;<span class="attr">status</span>:<span class="number">200</span>&#125;;<span class="keyword">const</span> s=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e);<span class="string">&quot;[object String]&quot;</span>===s||<span class="string">&quot;[object Request]&quot;</span>===s?(r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">`FetchEngine.parallel: reqs should be an array,but got <span class="subst">$&#123;s&#125;</span>,this request will downgrade to normal fetch`</span>),<span class="title function_">n</span>(a.<span class="title function_">fetch</span>(e,t))):<span class="string">&quot;[object Array]&quot;</span>!==s?(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">`FetchEngine.parallel: reqs must be a string , Request or Array object,but got <span class="subst">$&#123;s&#125;</span>`</span>),<span class="title function_">o</span>()):<span class="string">&quot;[object Array]&quot;</span>===s&amp;&amp;(<span class="number">0</span>===s.<span class="property">length</span>&amp;&amp;(r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">&quot;FetchEngine.parallel: reqs array is empty&quot;</span>),<span class="title function_">o</span>()),<span class="number">1</span>===s.<span class="property">length</span>&amp;&amp;(r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">&quot;FetchEngine.parallel: reqs array is only one element,this request will downgrade to normal fetch&quot;</span>),<span class="title function_">n</span>(a.<span class="title function_">fetch</span>(e[<span class="number">0</span>],t))));<span class="keyword">const</span> c=<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&quot;abortOtherInstance&quot;</span>),l=<span class="keyword">new</span> <span class="title class_">EventTarget</span>;<span class="title class_">Promise</span>.<span class="title function_">any</span>(e.<span class="title function_">map</span>((<span class="keyword">async</span> e=&gt;&#123;<span class="keyword">let</span> r=<span class="keyword">new</span> <span class="title class_">AbortController</span>,a=!<span class="number">1</span>;l.<span class="title function_">addEventListener</span>(c.<span class="property">type</span>,(<span class="function">()=&gt;</span>&#123;a||r.<span class="title function_">abort</span>()&#125;)),<span class="title function_">fetch</span>(e,&#123;<span class="attr">signal</span>:r.<span class="property">signal</span>,<span class="attr">mode</span>:t.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credential</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||<span class="string">&quot;follow&quot;</span>&#125;).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="property">status</span>==(t.<span class="property">status</span>||<span class="number">200</span>)&amp;&amp;(a=!<span class="number">0</span>,l.<span class="title function_">dispatchEvent</span>(c),<span class="title function_">n</span>(i.<span class="property">Z</span>.<span class="title function_">response</span>(e,&#123;&#125;)))&#125;)).<span class="title function_">catch</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="string">&quot;DOMException: The user aborted a request.&quot;</span>==e&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">log</span>()&#125;))&#125;))),<span class="built_in">setTimeout</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">o</span>(<span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&quot;504 All GateWays Failed,ClientWorker Show This Page,Engine Parallel&quot;</span>,&#123;<span class="attr">status</span>:<span class="number">504</span>,<span class="attr">statusText</span>:<span class="string">&quot;504 All Gateways Timeout&quot;</span>&#125;))&#125;),t.<span class="property">timeout</span>||<span class="number">5e3</span>)&#125;))&#125;,o=a&#125;,<span class="number">431</span>:<span class="function">(<span class="params">e,t,n</span>)=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;n.<span class="title function_">d</span>(t,&#123;<span class="attr">Z</span>:<span class="function">()=&gt;</span>o&#125;);<span class="keyword">var</span> r=<span class="title function_">n</span>(<span class="number">70</span>);<span class="keyword">const</span> i=&#123;<span class="attr">request</span>:<span class="function">(<span class="params">e,t</span>)=&gt;</span>&#123;<span class="string">&quot;navigate&quot;</span>===(e=e.<span class="title function_">clone</span>()).<span class="property">mode</span>&amp;&amp;r.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">&quot;You can&#x27;t rebuild a POST method with body when it is a navigate request.ClientWorker will ignore it&#x27;s body&quot;</span>);<span class="keyword">let</span> n=<span class="keyword">new</span> <span class="title class_">Request</span>(e,&#123;<span class="attr">headers</span>:<span class="title function_">a</span>(e,t.<span class="property">headers</span>),<span class="attr">method</span>:t.<span class="property">method</span>||e.<span class="property">method</span>,<span class="attr">mode</span>:<span class="string">&quot;navigate&quot;</span>===e.<span class="property">mode</span>?<span class="string">&quot;same-origin&quot;</span>:t.<span class="property">mode</span>||e.<span class="property">mode</span>,<span class="attr">credentials</span>:t.<span class="property">credentials</span>||e.<span class="property">credentials</span>,<span class="attr">redirect</span>:t.<span class="property">redirect</span>||e.<span class="property">redirect</span>&#125;);<span class="keyword">return</span> t.<span class="property">url</span>&amp;&amp;(n=<span class="keyword">new</span> <span class="title class_">Request</span>(t.<span class="property">url</span>,n)),n&#125;,<span class="attr">response</span>:<span class="function">(<span class="params">e,t</span>)=&gt;</span>&#123;<span class="keyword">if</span>(<span class="string">&quot;opaque&quot;</span>===e.<span class="property">type</span>)<span class="keyword">return</span> r.<span class="property">Z</span>.<span class="title function_">e</span>(<span class="string">&quot;You can&#x27;t rebuild a opaque response.ClientWorker will ignore this build&quot;</span>),e;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(e.<span class="property">body</span>,&#123;<span class="attr">headers</span>:<span class="title function_">a</span>(e,t.<span class="property">headers</span>),<span class="attr">status</span>:t.<span class="property">status</span>||e.<span class="property">status</span>,<span class="attr">statusText</span>:t.<span class="property">statusText</span>||e.<span class="property">statusText</span>&#125;)&#125;&#125;,a=<span class="function">(<span class="params">e,t</span>)=&gt;</span>&#123;<span class="keyword">if</span>(t)&#123;<span class="keyword">const</span> n=<span class="keyword">new</span> <span class="title class_">Headers</span>(e.<span class="property">headers</span>);<span class="keyword">for</span>(<span class="keyword">let</span> e <span class="keyword">in</span> t)<span class="keyword">void</span> <span class="number">0</span>!==t[e]?n.<span class="title function_">set</span>(e,t[e]):n.<span class="title function_">delete</span>(e);<span class="keyword">return</span> n&#125;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Headers</span>(e.<span class="property">headers</span>)&#125;,o=i&#125;,<span class="number">272</span>:<span class="function">(<span class="params">e,t,n</span>)=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="comment">/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">r</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>==e&#125;n.<span class="title function_">d</span>(t,&#123;<span class="attr">ZP</span>:<span class="function">()=&gt;</span>et&#125;);<span class="keyword">var</span> i=&#123;<span class="attr">isNothing</span>:r,<span class="attr">isObject</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> e&amp;&amp;<span class="literal">null</span>!==e&#125;,<span class="attr">toArray</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(e)?<span class="attr">e</span>:<span class="title function_">r</span>(e)?[]:[e]&#125;,<span class="attr">repeat</span>:<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r=<span class="string">&quot;&quot;</span>;<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;t;n+=<span class="number">1</span>)r+=e;<span class="keyword">return</span> r&#125;,<span class="attr">isNegativeZero</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="number">0</span>===e&amp;&amp;<span class="title class_">Number</span>.<span class="property">NEGATIVE_INFINITY</span>===<span class="number">1</span>/e&#125;,<span class="attr">extend</span>:<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r,i,a;<span class="keyword">if</span>(t)<span class="keyword">for</span>(n=<span class="number">0</span>,r=(a=<span class="title class_">Object</span>.<span class="title function_">keys</span>(t)).<span class="property">length</span>;n&lt;r;n+=<span class="number">1</span>)e[i=a[n]]=t[i];<span class="keyword">return</span> e&#125;&#125;;<span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n=<span class="string">&quot;&quot;</span>,r=e.<span class="property">reason</span>||<span class="string">&quot;(unknown reason)&quot;</span>;<span class="keyword">return</span> e.<span class="property">mark</span>?(e.<span class="property">mark</span>.<span class="property">name</span>&amp;&amp;(n+=<span class="string">&#x27;in &quot;&#x27;</span>+e.<span class="property">mark</span>.<span class="property">name</span>+<span class="string">&#x27;&quot; &#x27;</span>),n+=<span class="string">&quot;(&quot;</span>+(e.<span class="property">mark</span>.<span class="property">line</span>+<span class="number">1</span>)+<span class="string">&quot;:&quot;</span>+(e.<span class="property">mark</span>.<span class="property">column</span>+<span class="number">1</span>)+<span class="string">&quot;)&quot;</span>,!t&amp;&amp;e.<span class="property">mark</span>.<span class="property">snippet</span>&amp;&amp;(n+=<span class="string">&quot;\n\n&quot;</span>+e.<span class="property">mark</span>.<span class="property">snippet</span>),r+<span class="string">&quot; &quot;</span>+n):r&#125;<span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">e,t</span>)&#123;<span class="title class_">Error</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>),<span class="variable language_">this</span>.<span class="property">name</span>=<span class="string">&quot;YAMLException&quot;</span>,<span class="variable language_">this</span>.<span class="property">reason</span>=e,<span class="variable language_">this</span>.<span class="property">mark</span>=t,<span class="variable language_">this</span>.<span class="property">message</span>=<span class="title function_">a</span>(<span class="variable language_">this</span>,!<span class="number">1</span>),<span class="title class_">Error</span>.<span class="property">captureStackTrace</span>?<span class="title class_">Error</span>.<span class="title function_">captureStackTrace</span>(<span class="variable language_">this</span>,<span class="variable language_">this</span>.<span class="property">constructor</span>):<span class="variable language_">this</span>.<span class="property">stack</span>=(<span class="keyword">new</span> <span class="title class_">Error</span>).<span class="property">stack</span>||<span class="string">&quot;&quot;</span>&#125;o.<span class="property"><span class="keyword">prototype</span></span>=<span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Error</span>.<span class="property"><span class="keyword">prototype</span></span>),o.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>=o,o.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>+<span class="string">&quot;: &quot;</span>+<span class="title function_">a</span>(<span class="variable language_">this</span>,e)&#125;;<span class="keyword">var</span> s=o;<span class="keyword">function</span> <span class="title function_">c</span>(<span class="params">e,t,n,r,i</span>)&#123;<span class="keyword">var</span> a=<span class="string">&quot;&quot;</span>,o=<span class="string">&quot;&quot;</span>,s=<span class="title class_">Math</span>.<span class="title function_">floor</span>(i/<span class="number">2</span>)-<span class="number">1</span>;<span class="keyword">return</span> r-t&gt;s&amp;&amp;(t=r-s+(a=<span class="string">&quot; ... &quot;</span>).<span class="property">length</span>),n-r&gt;s&amp;&amp;(n=r+s-(o=<span class="string">&quot; ...&quot;</span>).<span class="property">length</span>),&#123;<span class="attr">str</span>:a+e.<span class="title function_">slice</span>(t,n).<span class="title function_">replace</span>(<span class="regexp">/\t/g</span>,<span class="string">&quot;→&quot;</span>)+o,<span class="attr">pos</span>:r-t+a.<span class="property">length</span>&#125;&#125;<span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">e,t</span>)&#123;<span class="keyword">return</span> i.<span class="title function_">repeat</span>(<span class="string">&quot; &quot;</span>,t-e.<span class="property">length</span>)+e&#125;<span class="keyword">var</span> u=<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">if</span>(t=<span class="title class_">Object</span>.<span class="title function_">create</span>(t||<span class="literal">null</span>),!e.<span class="property">buffer</span>)<span class="keyword">return</span> <span class="literal">null</span>;t.<span class="property">maxLength</span>||(t.<span class="property">maxLength</span>=<span class="number">79</span>),<span class="string">&quot;number&quot;</span>!=<span class="keyword">typeof</span> t.<span class="property">indent</span>&amp;&amp;(t.<span class="property">indent</span>=<span class="number">1</span>),<span class="string">&quot;number&quot;</span>!=<span class="keyword">typeof</span> t.<span class="property">linesBefore</span>&amp;&amp;(t.<span class="property">linesBefore</span>=<span class="number">3</span>),<span class="string">&quot;number&quot;</span>!=<span class="keyword">typeof</span> t.<span class="property">linesAfter</span>&amp;&amp;(t.<span class="property">linesAfter</span>=<span class="number">2</span>);<span class="keyword">for</span>(<span class="keyword">var</span> n,r=<span class="regexp">/\r?\n|\r|\0/g</span>,a=[<span class="number">0</span>],o=[],s=-<span class="number">1</span>;n=r.<span class="title function_">exec</span>(e.<span class="property">buffer</span>);)o.<span class="title function_">push</span>(n.<span class="property">index</span>),a.<span class="title function_">push</span>(n.<span class="property">index</span>+n[<span class="number">0</span>].<span class="property">length</span>),e.<span class="property">position</span>&lt;=n.<span class="property">index</span>&amp;&amp;s&lt;<span class="number">0</span>&amp;&amp;(s=a.<span class="property">length</span>-<span class="number">2</span>);s&lt;<span class="number">0</span>&amp;&amp;(s=a.<span class="property">length</span>-<span class="number">1</span>);<span class="keyword">var</span> u,p,_=<span class="string">&quot;&quot;</span>,f=<span class="title class_">Math</span>.<span class="title function_">min</span>(e.<span class="property">line</span>+t.<span class="property">linesAfter</span>,o.<span class="property">length</span>).<span class="title function_">toString</span>().<span class="property">length</span>,h=t.<span class="property">maxLength</span>-(t.<span class="property">indent</span>+f+<span class="number">3</span>);<span class="keyword">for</span>(u=<span class="number">1</span>;u&lt;=t.<span class="property">linesBefore</span>&amp;&amp;!(s-u&lt;<span class="number">0</span>);u++)p=<span class="title function_">c</span>(e.<span class="property">buffer</span>,a[s-u],o[s-u],e.<span class="property">position</span>-(a[s]-a[s-u]),h),_=i.<span class="title function_">repeat</span>(<span class="string">&quot; &quot;</span>,t.<span class="property">indent</span>)+<span class="title function_">l</span>((e.<span class="property">line</span>-u+<span class="number">1</span>).<span class="title function_">toString</span>(),f)+<span class="string">&quot; | &quot;</span>+p.<span class="property">str</span>+<span class="string">&quot;\n&quot;</span>+_;<span class="keyword">for</span>(p=<span class="title function_">c</span>(e.<span class="property">buffer</span>,a[s],o[s],e.<span class="property">position</span>,h),_+=i.<span class="title function_">repeat</span>(<span class="string">&quot; &quot;</span>,t.<span class="property">indent</span>)+<span class="title function_">l</span>((e.<span class="property">line</span>+<span class="number">1</span>).<span class="title function_">toString</span>(),f)+<span class="string">&quot; | &quot;</span>+p.<span class="property">str</span>+<span class="string">&quot;\n&quot;</span>,_+=i.<span class="title function_">repeat</span>(<span class="string">&quot;-&quot;</span>,t.<span class="property">indent</span>+f+<span class="number">3</span>+p.<span class="property">pos</span>)+<span class="string">&quot;^\n&quot;</span>,u=<span class="number">1</span>;u&lt;=t.<span class="property">linesAfter</span>&amp;&amp;!(s+u&gt;=o.<span class="property">length</span>);u++)p=<span class="title function_">c</span>(e.<span class="property">buffer</span>,a[s+u],o[s+u],e.<span class="property">position</span>-(a[s]-a[s+u]),h),_+=i.<span class="title function_">repeat</span>(<span class="string">&quot; &quot;</span>,t.<span class="property">indent</span>)+<span class="title function_">l</span>((e.<span class="property">line</span>+u+<span class="number">1</span>).<span class="title function_">toString</span>(),f)+<span class="string">&quot; | &quot;</span>+p.<span class="property">str</span>+<span class="string">&quot;\n&quot;</span>;<span class="keyword">return</span> _.<span class="title function_">replace</span>(<span class="regexp">/\n$/</span>,<span class="string">&quot;&quot;</span>)&#125;,p=[<span class="string">&quot;kind&quot;</span>,<span class="string">&quot;multi&quot;</span>,<span class="string">&quot;resolve&quot;</span>,<span class="string">&quot;construct&quot;</span>,<span class="string">&quot;instanceOf&quot;</span>,<span class="string">&quot;predicate&quot;</span>,<span class="string">&quot;represent&quot;</span>,<span class="string">&quot;representName&quot;</span>,<span class="string">&quot;defaultStyle&quot;</span>,<span class="string">&quot;styleAliases&quot;</span>],_=[<span class="string">&quot;scalar&quot;</span>,<span class="string">&quot;sequence&quot;</span>,<span class="string">&quot;mapping&quot;</span>];<span class="keyword">var</span> f=<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">if</span>(t=t||&#123;&#125;,<span class="title class_">Object</span>.<span class="title function_">keys</span>(t).<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">if</span>(-<span class="number">1</span>===p.<span class="title function_">indexOf</span>(t))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&#x27;Unknown option &quot;&#x27;</span>+t+<span class="string">&#x27;&quot; is met in definition of &quot;&#x27;</span>+e+<span class="string">&#x27;&quot; YAML type.&#x27;</span>)&#125;)),<span class="variable language_">this</span>.<span class="property">options</span>=t,<span class="variable language_">this</span>.<span class="property">tag</span>=e,<span class="variable language_">this</span>.<span class="property">kind</span>=t.<span class="property">kind</span>||<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">resolve</span>=t.<span class="property">resolve</span>||<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span>!<span class="number">0</span>&#125;,<span class="variable language_">this</span>.<span class="property">construct</span>=t.<span class="property">construct</span>||<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e&#125;,<span class="variable language_">this</span>.<span class="property">instanceOf</span>=t.<span class="property">instanceOf</span>||<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">predicate</span>=t.<span class="property">predicate</span>||<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">represent</span>=t.<span class="property">represent</span>||<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">representName</span>=t.<span class="property">representName</span>||<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">defaultStyle</span>=t.<span class="property">defaultStyle</span>||<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">multi</span>=t.<span class="property">multi</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">styleAliases</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t=&#123;&#125;;<span class="keyword">return</span> <span class="literal">null</span>!==e&amp;&amp;<span class="title class_">Object</span>.<span class="title function_">keys</span>(e).<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">n</span>)&#123;e[n].<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">e</span>)&#123;t[<span class="title class_">String</span>(e)]=n&#125;))&#125;)),t&#125;(t.<span class="property">styleAliases</span>||<span class="literal">null</span>),-<span class="number">1</span>===_.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">kind</span>))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&#x27;Unknown kind &quot;&#x27;</span>+<span class="variable language_">this</span>.<span class="property">kind</span>+<span class="string">&#x27;&quot; is specified for &quot;&#x27;</span>+e+<span class="string">&#x27;&quot; YAML type.&#x27;</span>)&#125;;<span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n=[];<span class="keyword">return</span> e[t].<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t=n.<span class="property">length</span>;n.<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">n,r</span>)&#123;n.<span class="property">tag</span>===e.<span class="property">tag</span>&amp;&amp;n.<span class="property">kind</span>===e.<span class="property">kind</span>&amp;&amp;n.<span class="property">multi</span>===e.<span class="property">multi</span>&amp;&amp;(t=r)&#125;)),n[t]=e&#125;)),n&#125;<span class="keyword">function</span> <span class="title function_">d</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">extend</span>(e)&#125;d.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">extend</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t=[],n=[];<span class="keyword">if</span>(e <span class="keyword">instanceof</span> f)n.<span class="title function_">push</span>(e);<span class="keyword">else</span> <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(e))n=n.<span class="title function_">concat</span>(e);<span class="keyword">else</span>&#123;<span class="keyword">if</span>(!e||!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(e.<span class="property">implicit</span>)&amp;&amp;!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(e.<span class="property">explicit</span>))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;Schema.extend argument should be a Type, [ Type ], or a schema definition (&#123; implicit: [...], explicit: [...] &#125;)&quot;</span>);e.<span class="property">implicit</span>&amp;&amp;(t=t.<span class="title function_">concat</span>(e.<span class="property">implicit</span>)),e.<span class="property">explicit</span>&amp;&amp;(n=n.<span class="title function_">concat</span>(e.<span class="property">explicit</span>))&#125;t.<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(!(e <span class="keyword">instanceof</span> f))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;Specified list of YAML types (or a single Type object) contains a non-Type object.&quot;</span>);<span class="keyword">if</span>(e.<span class="property">loadKind</span>&amp;&amp;<span class="string">&quot;scalar&quot;</span>!==e.<span class="property">loadKind</span>)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.&quot;</span>);<span class="keyword">if</span>(e.<span class="property">multi</span>)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.&quot;</span>)&#125;)),n.<span class="title function_">forEach</span>((<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(!(e <span class="keyword">instanceof</span> f))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;Specified list of YAML types (or a single Type object) contains a non-Type object.&quot;</span>)&#125;));<span class="keyword">var</span> r=<span class="title class_">Object</span>.<span class="title function_">create</span>(d.<span class="property"><span class="keyword">prototype</span></span>);<span class="keyword">return</span> r.<span class="property">implicit</span>=(<span class="variable language_">this</span>.<span class="property">implicit</span>||[]).<span class="title function_">concat</span>(t),r.<span class="property">explicit</span>=(<span class="variable language_">this</span>.<span class="property">explicit</span>||[]).<span class="title function_">concat</span>(n),r.<span class="property">compiledImplicit</span>=<span class="title function_">h</span>(r,<span class="string">&quot;implicit&quot;</span>),r.<span class="property">compiledExplicit</span>=<span class="title function_">h</span>(r,<span class="string">&quot;explicit&quot;</span>),r.<span class="property">compiledTypeMap</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> e,t,n=&#123;<span class="attr">scalar</span>:&#123;&#125;,<span class="attr">sequence</span>:&#123;&#125;,<span class="attr">mapping</span>:&#123;&#125;,<span class="attr">fallback</span>:&#123;&#125;,<span class="attr">multi</span>:&#123;<span class="attr">scalar</span>:[],<span class="attr">sequence</span>:[],<span class="attr">mapping</span>:[],<span class="attr">fallback</span>:[]&#125;&#125;;<span class="keyword">function</span> <span class="title function_">r</span>(<span class="params">e</span>)&#123;e.<span class="property">multi</span>?(n.<span class="property">multi</span>[e.<span class="property">kind</span>].<span class="title function_">push</span>(e),n.<span class="property">multi</span>.<span class="property">fallback</span>.<span class="title function_">push</span>(e)):n[e.<span class="property">kind</span>][e.<span class="property">tag</span>]=n.<span class="property">fallback</span>[e.<span class="property">tag</span>]=e&#125;<span class="keyword">for</span>(e=<span class="number">0</span>,t=<span class="variable language_">arguments</span>.<span class="property">length</span>;e&lt;t;e+=<span class="number">1</span>)<span class="variable language_">arguments</span>[e].<span class="title function_">forEach</span>(r);<span class="keyword">return</span> n&#125;(r.<span class="property">compiledImplicit</span>,r.<span class="property">compiledExplicit</span>),r&#125;;<span class="keyword">var</span> g=d,m=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:str&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e?<span class="attr">e</span>:<span class="string">&quot;&quot;</span>&#125;&#125;),y=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:seq&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;sequence&quot;</span>,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e?<span class="attr">e</span>:[]&#125;&#125;),b=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:map&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;mapping&quot;</span>,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e?<span class="attr">e</span>:&#123;&#125;&#125;&#125;),w=<span class="keyword">new</span> <span class="title function_">g</span>(&#123;<span class="attr">explicit</span>:[m,y,b]&#125;);<span class="keyword">var</span> E=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:null&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">0</span>;<span class="keyword">var</span> t=e.<span class="property">length</span>;<span class="keyword">return</span> <span class="number">1</span>===t&amp;&amp;<span class="string">&quot;~&quot;</span>===e||<span class="number">4</span>===t&amp;&amp;(<span class="string">&quot;null&quot;</span>===e||<span class="string">&quot;Null&quot;</span>===e||<span class="string">&quot;NULL&quot;</span>===e)&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>&#125;,<span class="attr">predicate</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>===e&#125;,<span class="attr">represent</span>:&#123;<span class="attr">canonical</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;~&quot;</span>&#125;,<span class="attr">lowercase</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;null&quot;</span>&#125;,<span class="attr">uppercase</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;NULL&quot;</span>&#125;,<span class="attr">camelcase</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;Null&quot;</span>&#125;,<span class="attr">empty</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;&quot;</span>&#125;&#125;,<span class="attr">defaultStyle</span>:<span class="string">&quot;lowercase&quot;</span>&#125;);<span class="keyword">var</span> A=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:bool&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">var</span> t=e.<span class="property">length</span>;<span class="keyword">return</span> <span class="number">4</span>===t&amp;&amp;(<span class="string">&quot;true&quot;</span>===e||<span class="string">&quot;True&quot;</span>===e||<span class="string">&quot;TRUE&quot;</span>===e)||<span class="number">5</span>===t&amp;&amp;(<span class="string">&quot;false&quot;</span>===e||<span class="string">&quot;False&quot;</span>===e||<span class="string">&quot;FALSE&quot;</span>===e)&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;true&quot;</span>===e||<span class="string">&quot;True&quot;</span>===e||<span class="string">&quot;TRUE&quot;</span>===e&#125;,<span class="attr">predicate</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;[object Boolean]&quot;</span>===<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e)&#125;,<span class="attr">represent</span>:&#123;<span class="attr">lowercase</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e?<span class="string">&quot;true&quot;</span>:<span class="string">&quot;false&quot;</span>&#125;,<span class="attr">uppercase</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e?<span class="string">&quot;TRUE&quot;</span>:<span class="string">&quot;FALSE&quot;</span>&#125;,<span class="attr">camelcase</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e?<span class="string">&quot;True&quot;</span>:<span class="string">&quot;False&quot;</span>&#125;&#125;,<span class="attr">defaultStyle</span>:<span class="string">&quot;lowercase&quot;</span>&#125;);<span class="keyword">function</span> <span class="title function_">C</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="number">48</span>&lt;=e&amp;&amp;e&lt;=<span class="number">55</span>&#125;<span class="keyword">function</span> <span class="title function_">R</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="number">48</span>&lt;=e&amp;&amp;e&lt;=<span class="number">57</span>&#125;<span class="keyword">var</span> O=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:int&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">var</span> t,n,r=e.<span class="property">length</span>,i=<span class="number">0</span>,a=!<span class="number">1</span>;<span class="keyword">if</span>(!r)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">if</span>(<span class="string">&quot;-&quot;</span>!==(t=e[i])&amp;&amp;<span class="string">&quot;+&quot;</span>!==t||(t=e[++i]),<span class="string">&quot;0&quot;</span>===t)&#123;<span class="keyword">if</span>(i+<span class="number">1</span>===r)<span class="keyword">return</span>!<span class="number">0</span>;<span class="keyword">if</span>(<span class="string">&quot;b&quot;</span>===(t=e[++i]))&#123;<span class="keyword">for</span>(i++;i&lt;r;i++)<span class="keyword">if</span>(<span class="string">&quot;_&quot;</span>!==(t=e[i]))&#123;<span class="keyword">if</span>(<span class="string">&quot;0&quot;</span>!==t&amp;&amp;<span class="string">&quot;1&quot;</span>!==t)<span class="keyword">return</span>!<span class="number">1</span>;a=!<span class="number">0</span>&#125;<span class="keyword">return</span> a&amp;&amp;<span class="string">&quot;_&quot;</span>!==t&#125;<span class="keyword">if</span>(<span class="string">&quot;x&quot;</span>===t)&#123;<span class="keyword">for</span>(i++;i&lt;r;i++)<span class="keyword">if</span>(<span class="string">&quot;_&quot;</span>!==(t=e[i]))&#123;<span class="keyword">if</span>(!(<span class="number">48</span>&lt;=(n=e.<span class="title function_">charCodeAt</span>(i))&amp;&amp;n&lt;=<span class="number">57</span>||<span class="number">65</span>&lt;=n&amp;&amp;n&lt;=<span class="number">70</span>||<span class="number">97</span>&lt;=n&amp;&amp;n&lt;=<span class="number">102</span>))<span class="keyword">return</span>!<span class="number">1</span>;a=!<span class="number">0</span>&#125;<span class="keyword">return</span> a&amp;&amp;<span class="string">&quot;_&quot;</span>!==t&#125;<span class="keyword">if</span>(<span class="string">&quot;o&quot;</span>===t)&#123;<span class="keyword">for</span>(i++;i&lt;r;i++)<span class="keyword">if</span>(<span class="string">&quot;_&quot;</span>!==(t=e[i]))&#123;<span class="keyword">if</span>(!<span class="title function_">C</span>(e.<span class="title function_">charCodeAt</span>(i)))<span class="keyword">return</span>!<span class="number">1</span>;a=!<span class="number">0</span>&#125;<span class="keyword">return</span> a&amp;&amp;<span class="string">&quot;_&quot;</span>!==t&#125;&#125;<span class="keyword">if</span>(<span class="string">&quot;_&quot;</span>===t)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">for</span>(;i&lt;r;i++)<span class="keyword">if</span>(<span class="string">&quot;_&quot;</span>!==(t=e[i]))&#123;<span class="keyword">if</span>(!<span class="title function_">R</span>(e.<span class="title function_">charCodeAt</span>(i)))<span class="keyword">return</span>!<span class="number">1</span>;a=!<span class="number">0</span>&#125;<span class="keyword">return</span>!(!a||<span class="string">&quot;_&quot;</span>===t)&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t,n=e,r=<span class="number">1</span>;<span class="keyword">if</span>(-<span class="number">1</span>!==n.<span class="title function_">indexOf</span>(<span class="string">&quot;_&quot;</span>)&amp;&amp;(n=n.<span class="title function_">replace</span>(<span class="regexp">/_/g</span>,<span class="string">&quot;&quot;</span>)),<span class="string">&quot;-&quot;</span>!==(t=n[<span class="number">0</span>])&amp;&amp;<span class="string">&quot;+&quot;</span>!==t||(<span class="string">&quot;-&quot;</span>===t&amp;&amp;(r=-<span class="number">1</span>),t=(n=n.<span class="title function_">slice</span>(<span class="number">1</span>))[<span class="number">0</span>]),<span class="string">&quot;0&quot;</span>===n)<span class="keyword">return</span> <span class="number">0</span>;<span class="keyword">if</span>(<span class="string">&quot;0&quot;</span>===t)&#123;<span class="keyword">if</span>(<span class="string">&quot;b&quot;</span>===n[<span class="number">1</span>])<span class="keyword">return</span> r*<span class="built_in">parseInt</span>(n.<span class="title function_">slice</span>(<span class="number">2</span>),<span class="number">2</span>);<span class="keyword">if</span>(<span class="string">&quot;x&quot;</span>===n[<span class="number">1</span>])<span class="keyword">return</span> r*<span class="built_in">parseInt</span>(n.<span class="title function_">slice</span>(<span class="number">2</span>),<span class="number">16</span>);<span class="keyword">if</span>(<span class="string">&quot;o&quot;</span>===n[<span class="number">1</span>])<span class="keyword">return</span> r*<span class="built_in">parseInt</span>(n.<span class="title function_">slice</span>(<span class="number">2</span>),<span class="number">8</span>)&#125;<span class="keyword">return</span> r*<span class="built_in">parseInt</span>(n,<span class="number">10</span>)&#125;,<span class="attr">predicate</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;[object Number]&quot;</span>===<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e)&amp;&amp;e%<span class="number">1</span>==<span class="number">0</span>&amp;&amp;!i.<span class="title function_">isNegativeZero</span>(e)&#125;,<span class="attr">represent</span>:&#123;<span class="attr">binary</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e&gt;=<span class="number">0</span>?<span class="string">&quot;0b&quot;</span>+e.<span class="title function_">toString</span>(<span class="number">2</span>):<span class="string">&quot;-0b&quot;</span>+e.<span class="title function_">toString</span>(<span class="number">2</span>).<span class="title function_">slice</span>(<span class="number">1</span>)&#125;,<span class="attr">octal</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e&gt;=<span class="number">0</span>?<span class="string">&quot;0o&quot;</span>+e.<span class="title function_">toString</span>(<span class="number">8</span>):<span class="string">&quot;-0o&quot;</span>+e.<span class="title function_">toString</span>(<span class="number">8</span>).<span class="title function_">slice</span>(<span class="number">1</span>)&#125;,<span class="attr">decimal</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e.<span class="title function_">toString</span>(<span class="number">10</span>)&#125;,<span class="attr">hexadecimal</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e&gt;=<span class="number">0</span>?<span class="string">&quot;0x&quot;</span>+e.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">toUpperCase</span>():<span class="string">&quot;-0x&quot;</span>+e.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">toUpperCase</span>().<span class="title function_">slice</span>(<span class="number">1</span>)&#125;&#125;,<span class="attr">defaultStyle</span>:<span class="string">&quot;decimal&quot;</span>,<span class="attr">styleAliases</span>:&#123;<span class="attr">binary</span>:[<span class="number">2</span>,<span class="string">&quot;bin&quot;</span>],<span class="attr">octal</span>:[<span class="number">8</span>,<span class="string">&quot;oct&quot;</span>],<span class="attr">decimal</span>:[<span class="number">10</span>,<span class="string">&quot;dec&quot;</span>],<span class="attr">hexadecimal</span>:[<span class="number">16</span>,<span class="string">&quot;hex&quot;</span>]&#125;&#125;),k=<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$&quot;</span>);<span class="keyword">var</span> T=<span class="regexp">/^[-+]?[0-9]+e/</span>;<span class="keyword">var</span> v=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:float&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e&amp;&amp;!(!k.<span class="title function_">test</span>(e)||<span class="string">&quot;_&quot;</span>===e[e.<span class="property">length</span>-<span class="number">1</span>])&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t,n;<span class="keyword">return</span> n=<span class="string">&quot;-&quot;</span>===(t=e.<span class="title function_">replace</span>(<span class="regexp">/_/g</span>,<span class="string">&quot;&quot;</span>).<span class="title function_">toLowerCase</span>())[<span class="number">0</span>]?-<span class="number">1</span>:<span class="number">1</span>,<span class="string">&quot;+-&quot;</span>.<span class="title function_">indexOf</span>(t[<span class="number">0</span>])&gt;=<span class="number">0</span>&amp;&amp;(t=t.<span class="title function_">slice</span>(<span class="number">1</span>)),<span class="string">&quot;.inf&quot;</span>===t?<span class="number">1</span>===n?<span class="title class_">Number</span>.<span class="property">POSITIVE_INFINITY</span>:<span class="title class_">Number</span>.<span class="property">NEGATIVE_INFINITY</span>:<span class="string">&quot;.nan&quot;</span>===t?<span class="title class_">NaN</span>:n*<span class="built_in">parseFloat</span>(t,<span class="number">10</span>)&#125;,<span class="attr">predicate</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;[object Number]&quot;</span>===<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e)&amp;&amp;(e%<span class="number">1</span>!=<span class="number">0</span>||i.<span class="title function_">isNegativeZero</span>(e))&#125;,<span class="attr">represent</span>:<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n;<span class="keyword">if</span>(<span class="built_in">isNaN</span>(e))<span class="keyword">switch</span>(t)&#123;<span class="keyword">case</span><span class="string">&quot;lowercase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;.nan&quot;</span>;<span class="keyword">case</span><span class="string">&quot;uppercase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;.NAN&quot;</span>;<span class="keyword">case</span><span class="string">&quot;camelcase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;.NaN&quot;</span>&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="title class_">Number</span>.<span class="property">POSITIVE_INFINITY</span>===e)<span class="keyword">switch</span>(t)&#123;<span class="keyword">case</span><span class="string">&quot;lowercase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;.inf&quot;</span>;<span class="keyword">case</span><span class="string">&quot;uppercase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;.INF&quot;</span>;<span class="keyword">case</span><span class="string">&quot;camelcase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;.Inf&quot;</span>&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="title class_">Number</span>.<span class="property">NEGATIVE_INFINITY</span>===e)<span class="keyword">switch</span>(t)&#123;<span class="keyword">case</span><span class="string">&quot;lowercase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;-.inf&quot;</span>;<span class="keyword">case</span><span class="string">&quot;uppercase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;-.INF&quot;</span>;<span class="keyword">case</span><span class="string">&quot;camelcase&quot;</span>:<span class="keyword">return</span><span class="string">&quot;-.Inf&quot;</span>&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i.<span class="title function_">isNegativeZero</span>(e))<span class="keyword">return</span><span class="string">&quot;-0.0&quot;</span>;<span class="keyword">return</span> n=e.<span class="title function_">toString</span>(<span class="number">10</span>),T.<span class="title function_">test</span>(n)?n.<span class="title function_">replace</span>(<span class="string">&quot;e&quot;</span>,<span class="string">&quot;.e&quot;</span>):n&#125;,<span class="attr">defaultStyle</span>:<span class="string">&quot;lowercase&quot;</span>&#125;),P=w.<span class="title function_">extend</span>(&#123;<span class="attr">implicit</span>:[E,A,O,v]&#125;),j=P,M=<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$&quot;</span>),D=<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$&quot;</span>);<span class="keyword">var</span> x=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:timestamp&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e&amp;&amp;(<span class="literal">null</span>!==M.<span class="title function_">exec</span>(e)||<span class="literal">null</span>!==D.<span class="title function_">exec</span>(e))&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t,n,r,i,a,o,s,c,l=<span class="number">0</span>,u=<span class="literal">null</span>;<span class="keyword">if</span>(<span class="literal">null</span>===(t=M.<span class="title function_">exec</span>(e))&amp;&amp;(t=D.<span class="title function_">exec</span>(e)),<span class="literal">null</span>===t)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Date resolve error&quot;</span>);<span class="keyword">if</span>(n=+t[<span class="number">1</span>],r=+t[<span class="number">2</span>]-<span class="number">1</span>,i=+t[<span class="number">3</span>],!t[<span class="number">4</span>])<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">UTC</span>(n,r,i));<span class="keyword">if</span>(a=+t[<span class="number">4</span>],o=+t[<span class="number">5</span>],s=+t[<span class="number">6</span>],t[<span class="number">7</span>])&#123;<span class="keyword">for</span>(l=t[<span class="number">7</span>].<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">3</span>);l.<span class="property">length</span>&lt;<span class="number">3</span>;)l+=<span class="string">&quot;0&quot;</span>;l=+l&#125;<span class="keyword">return</span> t[<span class="number">9</span>]&amp;&amp;(u=<span class="number">6e4</span>*(<span class="number">60</span>*+t[<span class="number">10</span>]+ +(t[<span class="number">11</span>]||<span class="number">0</span>)),<span class="string">&quot;-&quot;</span>===t[<span class="number">9</span>]&amp;&amp;(u=-u)),c=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">UTC</span>(n,r,i,a,o,s,l)),u&amp;&amp;c.<span class="title function_">setTime</span>(c.<span class="title function_">getTime</span>()-u),c&#125;,<span class="attr">instanceOf</span>:<span class="title class_">Date</span>,<span class="attr">represent</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> e.<span class="title function_">toISOString</span>()&#125;&#125;);<span class="keyword">var</span> I=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:merge&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;&lt;&lt;&quot;</span>===e||<span class="literal">null</span>===e&#125;&#125;),q=<span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r&quot;</span>;<span class="keyword">var</span> F=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:binary&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;scalar&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">var</span> t,n,r=<span class="number">0</span>,i=e.<span class="property">length</span>,a=q;<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;i;n++)<span class="keyword">if</span>(!((t=a.<span class="title function_">indexOf</span>(e.<span class="title function_">charAt</span>(n)))&gt;<span class="number">64</span>))&#123;<span class="keyword">if</span>(t&lt;<span class="number">0</span>)<span class="keyword">return</span>!<span class="number">1</span>;r+=<span class="number">6</span>&#125;<span class="keyword">return</span> r%<span class="number">8</span>==<span class="number">0</span>&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t,n,r=e.<span class="title function_">replace</span>(<span class="regexp">/[\r\n=]/g</span>,<span class="string">&quot;&quot;</span>),i=r.<span class="property">length</span>,a=q,o=<span class="number">0</span>,s=[];<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;i;t++)t%<span class="number">4</span>==<span class="number">0</span>&amp;&amp;t&amp;&amp;(s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">16</span>&amp;<span class="number">255</span>),s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">8</span>&amp;<span class="number">255</span>),s.<span class="title function_">push</span>(<span class="number">255</span>&amp;o)),o=o&lt;&lt;<span class="number">6</span>|a.<span class="title function_">indexOf</span>(r.<span class="title function_">charAt</span>(t));<span class="keyword">return</span> <span class="number">0</span>===(n=i%<span class="number">4</span>*<span class="number">6</span>)?(s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">16</span>&amp;<span class="number">255</span>),s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">8</span>&amp;<span class="number">255</span>),s.<span class="title function_">push</span>(<span class="number">255</span>&amp;o)):<span class="number">18</span>===n?(s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">10</span>&amp;<span class="number">255</span>),s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">2</span>&amp;<span class="number">255</span>)):<span class="number">12</span>===n&amp;&amp;s.<span class="title function_">push</span>(o&gt;&gt;<span class="number">4</span>&amp;<span class="number">255</span>),<span class="keyword">new</span> <span class="title class_">Uint8Array</span>(s)&#125;,<span class="attr">predicate</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;[object Uint8Array]&quot;</span>===<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(e)&#125;,<span class="attr">represent</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t,n,r=<span class="string">&quot;&quot;</span>,i=<span class="number">0</span>,a=e.<span class="property">length</span>,o=q;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;a;t++)t%<span class="number">3</span>==<span class="number">0</span>&amp;&amp;t&amp;&amp;(r+=o[i&gt;&gt;<span class="number">18</span>&amp;<span class="number">63</span>],r+=o[i&gt;&gt;<span class="number">12</span>&amp;<span class="number">63</span>],r+=o[i&gt;&gt;<span class="number">6</span>&amp;<span class="number">63</span>],r+=o[<span class="number">63</span>&amp;i]),i=(i&lt;&lt;<span class="number">8</span>)+e[t];<span class="keyword">return</span> <span class="number">0</span>===(n=a%<span class="number">3</span>)?(r+=o[i&gt;&gt;<span class="number">18</span>&amp;<span class="number">63</span>],r+=o[i&gt;&gt;<span class="number">12</span>&amp;<span class="number">63</span>],r+=o[i&gt;&gt;<span class="number">6</span>&amp;<span class="number">63</span>],r+=o[<span class="number">63</span>&amp;i]):<span class="number">2</span>===n?(r+=o[i&gt;&gt;<span class="number">10</span>&amp;<span class="number">63</span>],r+=o[i&gt;&gt;<span class="number">4</span>&amp;<span class="number">63</span>],r+=o[i&lt;&lt;<span class="number">2</span>&amp;<span class="number">63</span>],r+=o[<span class="number">64</span>]):<span class="number">1</span>===n&amp;&amp;(r+=o[i&gt;&gt;<span class="number">2</span>&amp;<span class="number">63</span>],r+=o[i&lt;&lt;<span class="number">4</span>&amp;<span class="number">63</span>],r+=o[<span class="number">64</span>],r+=o[<span class="number">64</span>]),r&#125;&#125;),L=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>,S=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;<span class="keyword">var</span> W=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:omap&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;sequence&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">0</span>;<span class="keyword">var</span> t,n,r,i,a,o=[],s=e;<span class="keyword">for</span>(t=<span class="number">0</span>,n=s.<span class="property">length</span>;t&lt;n;t+=<span class="number">1</span>)&#123;<span class="keyword">if</span>(r=s[t],a=!<span class="number">1</span>,<span class="string">&quot;[object Object]&quot;</span>!==S.<span class="title function_">call</span>(r))<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">for</span>(i <span class="keyword">in</span> r)<span class="keyword">if</span>(L.<span class="title function_">call</span>(r,i))&#123;<span class="keyword">if</span>(a)<span class="keyword">return</span>!<span class="number">1</span>;a=!<span class="number">0</span>&#125;<span class="keyword">if</span>(!a)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">if</span>(-<span class="number">1</span>!==o.<span class="title function_">indexOf</span>(i))<span class="keyword">return</span>!<span class="number">1</span>;o.<span class="title function_">push</span>(i)&#125;<span class="keyword">return</span>!<span class="number">0</span>&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e?<span class="attr">e</span>:[]&#125;&#125;),U=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;<span class="keyword">var</span> K=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:pairs&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;sequence&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">0</span>;<span class="keyword">var</span> t,n,r,i,a,o=e;<span class="keyword">for</span>(a=<span class="keyword">new</span> <span class="title class_">Array</span>(o.<span class="property">length</span>),t=<span class="number">0</span>,n=o.<span class="property">length</span>;t&lt;n;t+=<span class="number">1</span>)&#123;<span class="keyword">if</span>(r=o[t],<span class="string">&quot;[object Object]&quot;</span>!==U.<span class="title function_">call</span>(r))<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">if</span>(<span class="number">1</span>!==(i=<span class="title class_">Object</span>.<span class="title function_">keys</span>(r)).<span class="property">length</span>)<span class="keyword">return</span>!<span class="number">1</span>;a[t]=[i[<span class="number">0</span>],r[i[<span class="number">0</span>]]]&#125;<span class="keyword">return</span>!<span class="number">0</span>&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>[];<span class="keyword">var</span> t,n,r,i,a,o=e;<span class="keyword">for</span>(a=<span class="keyword">new</span> <span class="title class_">Array</span>(o.<span class="property">length</span>),t=<span class="number">0</span>,n=o.<span class="property">length</span>;t&lt;n;t+=<span class="number">1</span>)r=o[t],i=<span class="title class_">Object</span>.<span class="title function_">keys</span>(r),a[t]=[i[<span class="number">0</span>],r[i[<span class="number">0</span>]]];<span class="keyword">return</span> a&#125;&#125;),B=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>;<span class="keyword">var</span> Z=<span class="keyword">new</span> <span class="title function_">f</span>(<span class="string">&quot;tag:yaml.org,2002:set&quot;</span>,&#123;<span class="attr">kind</span>:<span class="string">&quot;mapping&quot;</span>,<span class="attr">resolve</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">if</span>(<span class="literal">null</span>===e)<span class="keyword">return</span>!<span class="number">0</span>;<span class="keyword">var</span> t,n=e;<span class="keyword">for</span>(t <span class="keyword">in</span> n)<span class="keyword">if</span>(B.<span class="title function_">call</span>(n,t)&amp;&amp;<span class="literal">null</span>!==n[t])<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">return</span>!<span class="number">0</span>&#125;,<span class="attr">construct</span>:<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!==e?<span class="attr">e</span>:&#123;&#125;&#125;&#125;),N=j.<span class="title function_">extend</span>(&#123;<span class="attr">implicit</span>:[x,I],<span class="attr">explicit</span>:[F,W,K,Z]&#125;),$=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>,G=<span class="regexp">/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![](e,n,r):pe(e,&#x27;unknown document directive &quot;&#x27;+n+&#x27;&quot;&#x27;)&#125;me(e,!0,-1),0===e.lineIndent&amp;&amp;45===e.input.charCodeAt(e.position)&amp;&amp;45===e.input.charCodeAt(e.position+1)&amp;&amp;45===e.input.charCodeAt(e.position+2)?(e.position+=3,me(e,!0,-1)):o&amp;&amp;ue(e,&quot;directives end mark is expected&quot;),Ce(e,e.lineIndent-1,4,!1,!0),me(e,!0,-1),e.checkLineBreaks&amp;&amp;Y.test(e.input.slice(a,e.position))&amp;&amp;pe(e,&quot;non-ASCII line breaks are interpreted as content&quot;),e.documents.push(e.result),e.position===e.lineStart&amp;&amp;ye(e)?46===e.input.charCodeAt(e.position)&amp;&amp;(e.position+=3,me(e,!0,-1)):e.position&lt;e.length-1&amp;&amp;ue(e,&quot;end of the stream or a document separator is expected&quot;)&#125;function Oe(e,t)&#123;t=t||&#123;&#125;,0!==(e=String(e)).length&amp;&amp;(10!==e.charCodeAt(e.length-1)&amp;&amp;13!==e.charCodeAt(e.length-1)&amp;&amp;(e+=&quot;\n&quot;),65279===e.charCodeAt(0)&amp;&amp;(e=e.slice(1)));var n=new ce(e,t),r=e.indexOf(&quot;\0&quot;);for(-1!==r&amp;&amp;(n.position=r,ue(n,&quot;null byte is not allowed in input&quot;)),n.input+=&quot;\0&quot;;32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position&lt;n.length-1;)Re(n);return n.documents&#125;var ke=&#123;loadAll:function(e,t,n)&#123;null!==t&amp;&amp;&quot;object&quot;==typeof t&amp;&amp;void 0===n&amp;&amp;(n=t,t=null);var r=Oe(e,n);if(&quot;function&quot;!=typeof t)return r;for(var i=0,a=r.length;i&lt;a;i+=1)t(r[i])&#125;,load:function(e,t)&#123;var n=Oe(e,t);if(0!==n.length)&#123;if(1===n.length)return n[0];throw new s(&quot;expected a single document in the stream, but found more&quot;)&#125;&#125;&#125;,Te=Object.prototype.toString,ve=Object.prototype.hasOwnProperty,Pe=65279,je=&#123;0:&quot;\\0&quot;,7:&quot;\\a&quot;,8:&quot;\\b&quot;,9:&quot;\\t&quot;,10:&quot;\\n&quot;,11:&quot;\\v&quot;,12:&quot;\\f&quot;,13:&quot;\\r&quot;,27:&quot;\\e&quot;,34:&#x27;\\&quot;&#x27;,92:&quot;\\\\&quot;,133:&quot;\\N&quot;,160:&quot;\\_&quot;,8232:&quot;\\L&quot;,8233:&quot;\\P&quot;&#125;,Me=[&quot;y&quot;,&quot;Y&quot;,&quot;yes&quot;,&quot;Yes&quot;,&quot;YES&quot;,&quot;on&quot;,&quot;On&quot;,&quot;ON&quot;,&quot;n&quot;,&quot;N&quot;,&quot;no&quot;,&quot;No&quot;,&quot;NO&quot;,&quot;off&quot;,&quot;Off&quot;,&quot;OFF&quot;],De=/</span>^[-+]?[<span class="number">0</span>-9_]+(?::[<span class="number">0</span>-9_]+)+(?:\.[<span class="number">0</span>-9_]*)?$/;<span class="keyword">function</span> <span class="title function_">xe</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t,n,r;<span class="keyword">if</span>(t=e.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">toUpperCase</span>(),e&lt;=<span class="number">255</span>)n=<span class="string">&quot;x&quot;</span>,r=<span class="number">2</span>;<span class="keyword">else</span> <span class="keyword">if</span>(e&lt;=<span class="number">65535</span>)n=<span class="string">&quot;u&quot;</span>,r=<span class="number">4</span>;<span class="keyword">else</span>&#123;<span class="keyword">if</span>(!(e&lt;=<span class="number">4294967295</span>))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;code point within a string may not be greater than 0xFFFFFFFF&quot;</span>);n=<span class="string">&quot;U&quot;</span>,r=<span class="number">8</span>&#125;<span class="keyword">return</span><span class="string">&quot;\\&quot;</span>+n+i.<span class="title function_">repeat</span>(<span class="string">&quot;0&quot;</span>,r-t.<span class="property">length</span>)+t&#125;<span class="keyword">function</span> <span class="title function_">Ie</span>(<span class="params">e</span>)&#123;<span class="variable language_">this</span>.<span class="property">schema</span>=e.<span class="property">schema</span>||N,<span class="variable language_">this</span>.<span class="property">indent</span>=<span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">1</span>,e.<span class="property">indent</span>||<span class="number">2</span>),<span class="variable language_">this</span>.<span class="property">noArrayIndent</span>=e.<span class="property">noArrayIndent</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">skipInvalid</span>=e.<span class="property">skipInvalid</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">flowLevel</span>=i.<span class="title function_">isNothing</span>(e.<span class="property">flowLevel</span>)?-<span class="number">1</span>:e.<span class="property">flowLevel</span>,<span class="variable language_">this</span>.<span class="property">styleMap</span>=<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r,i,a,o,s,c;<span class="keyword">if</span>(<span class="literal">null</span>===t)<span class="keyword">return</span>&#123;&#125;;<span class="keyword">for</span>(n=&#123;&#125;,i=<span class="number">0</span>,a=(r=<span class="title class_">Object</span>.<span class="title function_">keys</span>(t)).<span class="property">length</span>;i&lt;a;i+=<span class="number">1</span>)o=r[i],s=<span class="title class_">String</span>(t[o]),<span class="string">&quot;!!&quot;</span>===o.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">2</span>)&amp;&amp;(o=<span class="string">&quot;tag:yaml.org,2002:&quot;</span>+o.<span class="title function_">slice</span>(<span class="number">2</span>)),(c=e.<span class="property">compiledTypeMap</span>.<span class="property">fallback</span>[o])&amp;&amp;ve.<span class="title function_">call</span>(c.<span class="property">styleAliases</span>,s)&amp;&amp;(s=c.<span class="property">styleAliases</span>[s]),n[o]=s;<span class="keyword">return</span> n&#125;(<span class="variable language_">this</span>.<span class="property">schema</span>,e.<span class="property">styles</span>||<span class="literal">null</span>),<span class="variable language_">this</span>.<span class="property">sortKeys</span>=e.<span class="property">sortKeys</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">lineWidth</span>=e.<span class="property">lineWidth</span>||<span class="number">80</span>,<span class="variable language_">this</span>.<span class="property">noRefs</span>=e.<span class="property">noRefs</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">noCompatMode</span>=e.<span class="property">noCompatMode</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">condenseFlow</span>=e.<span class="property">condenseFlow</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">quotingType</span>=<span class="string">&#x27;&quot;&#x27;</span>===e.<span class="property">quotingType</span>?<span class="number">2</span>:<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">forceQuotes</span>=e.<span class="property">forceQuotes</span>||!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="property">replacer</span>=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.<span class="property">replacer</span>?e.<span class="property">replacer</span>:<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">implicitTypes</span>=<span class="variable language_">this</span>.<span class="property">schema</span>.<span class="property">compiledImplicit</span>,<span class="variable language_">this</span>.<span class="property">explicitTypes</span>=<span class="variable language_">this</span>.<span class="property">schema</span>.<span class="property">compiledExplicit</span>,<span class="variable language_">this</span>.<span class="property">tag</span>=<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">result</span>=<span class="string">&quot;&quot;</span>,<span class="variable language_">this</span>.<span class="property">duplicates</span>=[],<span class="variable language_">this</span>.<span class="property">usedDuplicates</span>=<span class="literal">null</span>&#125;<span class="keyword">function</span> <span class="title function_">qe</span>(<span class="params">e,t</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n,r=i.<span class="title function_">repeat</span>(<span class="string">&quot; &quot;</span>,t),a=<span class="number">0</span>,o=-<span class="number">1</span>,s=<span class="string">&quot;&quot;</span>,c=e.<span class="property">length</span>;a&lt;c;)-<span class="number">1</span>===(o=e.<span class="title function_">indexOf</span>(<span class="string">&quot;\n&quot;</span>,a))?(n=e.<span class="title function_">slice</span>(a),a=c):(n=e.<span class="title function_">slice</span>(a,o+<span class="number">1</span>),a=o+<span class="number">1</span>),n.<span class="property">length</span>&amp;&amp;<span class="string">&quot;\n&quot;</span>!==n&amp;&amp;(s+=r),s+=n;<span class="keyword">return</span> s&#125;<span class="keyword">function</span> <span class="title function_">Fe</span>(<span class="params">e,t</span>)&#123;<span class="keyword">return</span><span class="string">&quot;\n&quot;</span>+i.<span class="title function_">repeat</span>(<span class="string">&quot; &quot;</span>,e.<span class="property">indent</span>*t)&#125;<span class="keyword">function</span> <span class="title function_">Le</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="number">32</span>===e||<span class="number">9</span>===e&#125;<span class="keyword">function</span> <span class="title function_">Se</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="number">32</span>&lt;=e&amp;&amp;e&lt;=<span class="number">126</span>||<span class="number">161</span>&lt;=e&amp;&amp;e&lt;=<span class="number">55295</span>&amp;&amp;<span class="number">8232</span>!==e&amp;&amp;<span class="number">8233</span>!==e||<span class="number">57344</span>&lt;=e&amp;&amp;e&lt;=<span class="number">65533</span>&amp;&amp;e!==<span class="title class_">Pe</span>||<span class="number">65536</span>&lt;=e&amp;&amp;e&lt;=<span class="number">1114111</span>&#125;<span class="keyword">function</span> <span class="title function_">We</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span> <span class="title class_">Se</span>(e)&amp;&amp;e!==<span class="title class_">Pe</span>&amp;&amp;<span class="number">13</span>!==e&amp;&amp;<span class="number">10</span>!==e&#125;<span class="keyword">function</span> <span class="title function_">Ue</span>(<span class="params">e,t,n</span>)&#123;<span class="keyword">var</span> r=<span class="title class_">We</span>(e),i=r&amp;&amp;!<span class="title class_">Le</span>(e);<span class="keyword">return</span>(n?<span class="attr">r</span>:r&amp;&amp;<span class="number">44</span>!==e&amp;&amp;<span class="number">91</span>!==e&amp;&amp;<span class="number">93</span>!==e&amp;&amp;<span class="number">123</span>!==e&amp;&amp;<span class="number">125</span>!==e)&amp;&amp;<span class="number">35</span>!==e&amp;&amp;!(<span class="number">58</span>===t&amp;&amp;!i)||<span class="title class_">We</span>(t)&amp;&amp;!<span class="title class_">Le</span>(t)&amp;&amp;<span class="number">35</span>===e||<span class="number">58</span>===t&amp;&amp;i&#125;<span class="keyword">function</span> <span class="title function_">Ke</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r=e.<span class="title function_">charCodeAt</span>(t);<span class="keyword">return</span> r&gt;=<span class="number">55296</span>&amp;&amp;r&lt;=<span class="number">56319</span>&amp;&amp;t+<span class="number">1</span>&lt;e.<span class="property">length</span>&amp;&amp;(n=e.<span class="title function_">charCodeAt</span>(t+<span class="number">1</span>))&gt;=<span class="number">56320</span>&amp;&amp;n&lt;=<span class="number">57343</span>?<span class="number">1024</span>*(r-<span class="number">55296</span>)+n-<span class="number">56320</span>+<span class="number">65536</span>:r&#125;<span class="keyword">function</span> <span class="title function_">Be</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="regexp">/^\n* /</span>.<span class="title function_">test</span>(e)&#125;<span class="keyword">function</span> <span class="title function_">Ze</span>(<span class="params">e,t,n,r,i,a,o,s</span>)&#123;<span class="keyword">var</span> c,l,u=<span class="number">0</span>,p=<span class="literal">null</span>,_=!<span class="number">1</span>,f=!<span class="number">1</span>,h=-<span class="number">1</span>!==r,d=-<span class="number">1</span>,g=<span class="title class_">Se</span>(l=<span class="title class_">Ke</span>(e,<span class="number">0</span>))&amp;&amp;l!==<span class="title class_">Pe</span>&amp;&amp;!<span class="title class_">Le</span>(l)&amp;&amp;<span class="number">45</span>!==l&amp;&amp;<span class="number">63</span>!==l&amp;&amp;<span class="number">58</span>!==l&amp;&amp;<span class="number">44</span>!==l&amp;&amp;<span class="number">91</span>!==l&amp;&amp;<span class="number">93</span>!==l&amp;&amp;<span class="number">123</span>!==l&amp;&amp;<span class="number">125</span>!==l&amp;&amp;<span class="number">35</span>!==l&amp;&amp;<span class="number">38</span>!==l&amp;&amp;<span class="number">42</span>!==l&amp;&amp;<span class="number">33</span>!==l&amp;&amp;<span class="number">124</span>!==l&amp;&amp;<span class="number">61</span>!==l&amp;&amp;<span class="number">62</span>!==l&amp;&amp;<span class="number">39</span>!==l&amp;&amp;<span class="number">34</span>!==l&amp;&amp;<span class="number">37</span>!==l&amp;&amp;<span class="number">64</span>!==l&amp;&amp;<span class="number">96</span>!==l&amp;&amp;<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span>!<span class="title class_">Le</span>(e)&amp;&amp;<span class="number">58</span>!==e&#125;(<span class="title class_">Ke</span>(e,e.<span class="property">length</span>-<span class="number">1</span>));<span class="keyword">if</span>(t||o)<span class="keyword">for</span>(c=<span class="number">0</span>;c&lt;e.<span class="property">length</span>;u&gt;=<span class="number">65536</span>?c+=<span class="number">2</span>:c++)&#123;<span class="keyword">if</span>(!<span class="title class_">Se</span>(u=<span class="title class_">Ke</span>(e,c)))<span class="keyword">return</span> <span class="number">5</span>;g=g&amp;&amp;<span class="title class_">Ue</span>(u,p,s),p=u&#125;<span class="keyword">else</span>&#123;<span class="keyword">for</span>(c=<span class="number">0</span>;c&lt;e.<span class="property">length</span>;u&gt;=<span class="number">65536</span>?c+=<span class="number">2</span>:c++)&#123;<span class="keyword">if</span>(<span class="number">10</span>===(u=<span class="title class_">Ke</span>(e,c)))_=!<span class="number">0</span>,h&amp;&amp;(f=f||c-d-<span class="number">1</span>&gt;r&amp;&amp;<span class="string">&quot; &quot;</span>!==e[d+<span class="number">1</span>],d=c);<span class="keyword">else</span> <span class="keyword">if</span>(!<span class="title class_">Se</span>(u))<span class="keyword">return</span> <span class="number">5</span>;g=g&amp;&amp;<span class="title class_">Ue</span>(u,p,s),p=u&#125;f=f||h&amp;&amp;c-d-<span class="number">1</span>&gt;r&amp;&amp;<span class="string">&quot; &quot;</span>!==e[d+<span class="number">1</span>]&#125;<span class="keyword">return</span> _||f?n&gt;<span class="number">9</span>&amp;&amp;<span class="title class_">Be</span>(e)?<span class="number">5</span>:o?<span class="number">2</span>===a?<span class="number">5</span>:<span class="number">2</span>:f?<span class="number">4</span>:<span class="number">3</span>:!g||o||<span class="title function_">i</span>(e)?<span class="number">2</span>===a?<span class="number">5</span>:<span class="number">2</span>:<span class="number">1</span>&#125;<span class="keyword">function</span> <span class="title function_">Ne</span>(<span class="params">e,t,n,r,i</span>)&#123;e.<span class="property">dump</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">if</span>(<span class="number">0</span>===t.<span class="property">length</span>)<span class="keyword">return</span> <span class="number">2</span>===e.<span class="property">quotingType</span>?<span class="string">&#x27;&quot;&quot;&#x27;</span>:<span class="string">&quot;&#x27;&#x27;&quot;</span>;<span class="keyword">if</span>(!e.<span class="property">noCompatMode</span>&amp;&amp;(-<span class="number">1</span>!==<span class="title class_">Me</span>.<span class="title function_">indexOf</span>(t)||<span class="title class_">De</span>.<span class="title function_">test</span>(t)))<span class="keyword">return</span> <span class="number">2</span>===e.<span class="property">quotingType</span>?<span class="string">&#x27;&quot;&#x27;</span>+t+<span class="string">&#x27;&quot;&#x27;</span>:<span class="string">&quot;&#x27;&quot;</span>+t+<span class="string">&quot;&#x27;&quot;</span>;<span class="keyword">var</span> a=e.<span class="property">indent</span>*<span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">1</span>,n),o=-<span class="number">1</span>===e.<span class="property">lineWidth</span>?-<span class="number">1</span>:<span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="title class_">Math</span>.<span class="title function_">min</span>(e.<span class="property">lineWidth</span>,<span class="number">40</span>),e.<span class="property">lineWidth</span>-a),c=r||e.<span class="property">flowLevel</span>&gt;-<span class="number">1</span>&amp;&amp;n&gt;=e.<span class="property">flowLevel</span>;<span class="keyword">switch</span>(<span class="title class_">Ze</span>(t,c,e.<span class="property">indent</span>,o,(<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r;<span class="keyword">for</span>(n=<span class="number">0</span>,r=e.<span class="property">implicitTypes</span>.<span class="property">length</span>;n&lt;r;n+=<span class="number">1</span>)<span class="keyword">if</span>(e.<span class="property">implicitTypes</span>[n].<span class="title function_">resolve</span>(t))<span class="keyword">return</span>!<span class="number">0</span>;<span class="keyword">return</span>!<span class="number">1</span>&#125;(e,t)&#125;),e.<span class="property">quotingType</span>,e.<span class="property">forceQuotes</span>&amp;&amp;!r,i))&#123;<span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">return</span> t;<span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">return</span><span class="string">&quot;&#x27;&quot;</span>+t.<span class="title function_">replace</span>(<span class="regexp">/&#x27;/g</span>,<span class="string">&quot;&#x27;&#x27;&quot;</span>)+<span class="string">&quot;&#x27;&quot;</span>;<span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">return</span><span class="string">&quot;|&quot;</span>+$e(t,e.<span class="property">indent</span>)+<span class="title class_">Ge</span>(<span class="title function_">qe</span>(t,a));<span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">return</span><span class="string">&quot;&gt;&quot;</span>+$e(t,e.<span class="property">indent</span>)+<span class="title class_">Ge</span>(<span class="title function_">qe</span>(<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r,i=<span class="regexp">/(\n+)([^\n]*)/g</span>,a=(s=e.<span class="title function_">indexOf</span>(<span class="string">&quot;\n&quot;</span>),s=-<span class="number">1</span>!==s?<span class="attr">s</span>:e.<span class="property">length</span>,i.<span class="property">lastIndex</span>=s,<span class="title class_">Ye</span>(e.<span class="title function_">slice</span>(<span class="number">0</span>,s),t)),o=<span class="string">&quot;\n&quot;</span>===e[<span class="number">0</span>]||<span class="string">&quot; &quot;</span>===e[<span class="number">0</span>];<span class="keyword">var</span> s;<span class="keyword">for</span>(;r=i.<span class="title function_">exec</span>(e);)&#123;<span class="keyword">var</span> c=r[<span class="number">1</span>],l=r[<span class="number">2</span>];n=<span class="string">&quot; &quot;</span>===l[<span class="number">0</span>],a+=c+(o||n||<span class="string">&quot;&quot;</span>===l?<span class="string">&quot;&quot;</span>:<span class="string">&quot;\n&quot;</span>)+<span class="title class_">Ye</span>(l,t),o=n&#125;<span class="keyword">return</span> a&#125;(t,o),a));<span class="keyword">case</span> <span class="number">5</span>:<span class="keyword">return</span><span class="string">&#x27;&quot;&#x27;</span>+<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t,n=<span class="string">&quot;&quot;</span>,r=<span class="number">0</span>,i=<span class="number">0</span>;i&lt;e.<span class="property">length</span>;r&gt;=<span class="number">65536</span>?i+=<span class="number">2</span>:i++)r=<span class="title class_">Ke</span>(e,i),!(t=je[r])&amp;&amp;<span class="title class_">Se</span>(r)?(n+=e[i],r&gt;=<span class="number">65536</span>&amp;&amp;(n+=e[i+<span class="number">1</span>])):n+=t||<span class="title function_">xe</span>(r);<span class="keyword">return</span> n&#125;(t)+<span class="string">&#x27;&quot;&#x27;</span>;<span class="attr">default</span>:<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;impossible error: invalid scalar style&quot;</span>)&#125;&#125;()&#125;<span class="keyword">function</span> <span class="title function_">$e</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n=<span class="title class_">Be</span>(e)?<span class="title class_">String</span>(t):<span class="string">&quot;&quot;</span>,r=<span class="string">&quot;\n&quot;</span>===e[e.<span class="property">length</span>-<span class="number">1</span>];<span class="keyword">return</span> n+(r&amp;&amp;(<span class="string">&quot;\n&quot;</span>===e[e.<span class="property">length</span>-<span class="number">2</span>]||<span class="string">&quot;\n&quot;</span>===e)?<span class="string">&quot;+&quot;</span>:r?<span class="string">&quot;&quot;</span>:<span class="string">&quot;-&quot;</span>)+<span class="string">&quot;\n&quot;</span>&#125;<span class="keyword">function</span> <span class="title function_">Ge</span>(<span class="params">e</span>)&#123;<span class="keyword">return</span><span class="string">&quot;\n&quot;</span>===e[e.<span class="property">length</span>-<span class="number">1</span>]?e.<span class="title function_">slice</span>(<span class="number">0</span>,-<span class="number">1</span>):e&#125;<span class="keyword">function</span> <span class="title function_">Ye</span>(<span class="params">e,t</span>)&#123;<span class="keyword">if</span>(<span class="string">&quot;&quot;</span>===e||<span class="string">&quot; &quot;</span>===e[<span class="number">0</span>])<span class="keyword">return</span> e;<span class="keyword">for</span>(<span class="keyword">var</span> n,r,i=<span class="regexp">/ [^ ]/g</span>,a=<span class="number">0</span>,o=<span class="number">0</span>,s=<span class="number">0</span>,c=<span class="string">&quot;&quot;</span>;n=i.<span class="title function_">exec</span>(e);)(s=n.<span class="property">index</span>)-a&gt;t&amp;&amp;(r=o&gt;a?<span class="attr">o</span>:s,c+=<span class="string">&quot;\n&quot;</span>+e.<span class="title function_">slice</span>(a,r),a=r+<span class="number">1</span>),o=s;<span class="keyword">return</span> c+=<span class="string">&quot;\n&quot;</span>,e.<span class="property">length</span>-a&gt;t&amp;&amp;o&gt;a?c+=e.<span class="title function_">slice</span>(a,o)+<span class="string">&quot;\n&quot;</span>+e.<span class="title function_">slice</span>(o+<span class="number">1</span>):c+=e.<span class="title function_">slice</span>(a),c.<span class="title function_">slice</span>(<span class="number">1</span>)&#125;<span class="keyword">function</span> <span class="title function_">Ve</span>(<span class="params">e,t,n,r</span>)&#123;<span class="keyword">var</span> i,a,o,s=<span class="string">&quot;&quot;</span>,c=e.<span class="property">tag</span>;<span class="keyword">for</span>(i=<span class="number">0</span>,a=n.<span class="property">length</span>;i&lt;a;i+=<span class="number">1</span>)o=n[i],e.<span class="property">replacer</span>&amp;&amp;(o=e.<span class="property">replacer</span>.<span class="title function_">call</span>(n,<span class="title class_">String</span>(i),o)),(<span class="title class_">He</span>(e,t+<span class="number">1</span>,o,!<span class="number">0</span>,!<span class="number">0</span>,!<span class="number">1</span>,!<span class="number">0</span>)||<span class="keyword">void</span> <span class="number">0</span>===o&amp;&amp;<span class="title class_">He</span>(e,t+<span class="number">1</span>,<span class="literal">null</span>,!<span class="number">0</span>,!<span class="number">0</span>,!<span class="number">1</span>,!<span class="number">0</span>))&amp;&amp;(r&amp;&amp;<span class="string">&quot;&quot;</span>===s||(s+=<span class="title class_">Fe</span>(e,t)),e.<span class="property">dump</span>&amp;&amp;<span class="number">10</span>===e.<span class="property">dump</span>.<span class="title function_">charCodeAt</span>(<span class="number">0</span>)?s+=<span class="string">&quot;-&quot;</span>:s+=<span class="string">&quot;- &quot;</span>,s+=e.<span class="property">dump</span>);e.<span class="property">tag</span>=c,e.<span class="property">dump</span>=s||<span class="string">&quot;[]&quot;</span>&#125;<span class="keyword">function</span> <span class="title function_">ze</span>(<span class="params">e,t,n</span>)&#123;<span class="keyword">var</span> r,i,a,o,c,l;<span class="keyword">for</span>(a=<span class="number">0</span>,o=(i=n?e.<span class="property">explicitTypes</span>:e.<span class="property">implicitTypes</span>).<span class="property">length</span>;a&lt;o;a+=<span class="number">1</span>)<span class="keyword">if</span>(((c=i[a]).<span class="property">instanceOf</span>||c.<span class="property">predicate</span>)&amp;&amp;(!c.<span class="property">instanceOf</span>||<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> t&amp;&amp;t <span class="keyword">instanceof</span> c.<span class="property">instanceOf</span>)&amp;&amp;(!c.<span class="property">predicate</span>||c.<span class="title function_">predicate</span>(t)))&#123;<span class="keyword">if</span>(n?c.<span class="property">multi</span>&amp;&amp;c.<span class="property">representName</span>?e.<span class="property">tag</span>=c.<span class="title function_">representName</span>(t):e.<span class="property">tag</span>=c.<span class="property">tag</span>:e.<span class="property">tag</span>=<span class="string">&quot;?&quot;</span>,c.<span class="property">represent</span>)&#123;<span class="keyword">if</span>(l=e.<span class="property">styleMap</span>[c.<span class="property">tag</span>]||c.<span class="property">defaultStyle</span>,<span class="string">&quot;[object Function]&quot;</span>===<span class="title class_">Te</span>.<span class="title function_">call</span>(c.<span class="property">represent</span>))r=c.<span class="title function_">represent</span>(t,l);<span class="keyword">else</span>&#123;<span class="keyword">if</span>(!ve.<span class="title function_">call</span>(c.<span class="property">represent</span>,l))<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;!&lt;&quot;</span>+c.<span class="property">tag</span>+<span class="string">&#x27;&gt; tag resolver accepts not &quot;&#x27;</span>+l+<span class="string">&#x27;&quot; style&#x27;</span>);r=c.<span class="property">represent</span>[l](t,l)&#125;e.<span class="property">dump</span>=r&#125;<span class="keyword">return</span>!<span class="number">0</span>&#125;<span class="keyword">return</span>!<span class="number">1</span>&#125;<span class="keyword">function</span> <span class="title function_">He</span>(<span class="params">e,t,n,r,i,a,o</span>)&#123;e.<span class="property">tag</span>=<span class="literal">null</span>,e.<span class="property">dump</span>=n,<span class="title function_">ze</span>(e,n,!<span class="number">1</span>)||<span class="title function_">ze</span>(e,n,!<span class="number">0</span>);<span class="keyword">var</span> c,l=<span class="title class_">Te</span>.<span class="title function_">call</span>(e.<span class="property">dump</span>),u=r;r&amp;&amp;(r=e.<span class="property">flowLevel</span>&lt;<span class="number">0</span>||e.<span class="property">flowLevel</span>&gt;t);<span class="keyword">var</span> p,_,f=<span class="string">&quot;[object Object]&quot;</span>===l||<span class="string">&quot;[object Array]&quot;</span>===l;<span class="keyword">if</span>(f&amp;&amp;(_=-<span class="number">1</span>!==(p=e.<span class="property">duplicates</span>.<span class="title function_">indexOf</span>(n))),(<span class="literal">null</span>!==e.<span class="property">tag</span>&amp;&amp;<span class="string">&quot;?&quot;</span>!==e.<span class="property">tag</span>||_||<span class="number">2</span>!==e.<span class="property">indent</span>&amp;&amp;t&gt;<span class="number">0</span>)&amp;&amp;(i=!<span class="number">1</span>),_&amp;&amp;e.<span class="property">usedDuplicates</span>[p])e.<span class="property">dump</span>=<span class="string">&quot;*ref_&quot;</span>+p;<span class="keyword">else</span>&#123;<span class="keyword">if</span>(f&amp;&amp;_&amp;&amp;!e.<span class="property">usedDuplicates</span>[p]&amp;&amp;(e.<span class="property">usedDuplicates</span>[p]=!<span class="number">0</span>),<span class="string">&quot;[object Object]&quot;</span>===l)r&amp;&amp;<span class="number">0</span>!==<span class="title class_">Object</span>.<span class="title function_">keys</span>(e.<span class="property">dump</span>).<span class="property">length</span>?(!<span class="keyword">function</span>(<span class="params">e,t,n,r</span>)&#123;<span class="keyword">var</span> i,a,o,c,l,u,p=<span class="string">&quot;&quot;</span>,_=e.<span class="property">tag</span>,f=<span class="title class_">Object</span>.<span class="title function_">keys</span>(n);<span class="keyword">if</span>(!<span class="number">0</span>===e.<span class="property">sortKeys</span>)f.<span class="title function_">sort</span>();<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.<span class="property">sortKeys</span>)f.<span class="title function_">sort</span>(e.<span class="property">sortKeys</span>);<span class="keyword">else</span> <span class="keyword">if</span>(e.<span class="property">sortKeys</span>)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;sortKeys must be a boolean or a function&quot;</span>);<span class="keyword">for</span>(i=<span class="number">0</span>,a=f.<span class="property">length</span>;i&lt;a;i+=<span class="number">1</span>)u=<span class="string">&quot;&quot;</span>,r&amp;&amp;<span class="string">&quot;&quot;</span>===p||(u+=<span class="title class_">Fe</span>(e,t)),c=n[o=f[i]],e.<span class="property">replacer</span>&amp;&amp;(c=e.<span class="property">replacer</span>.<span class="title function_">call</span>(n,o,c)),<span class="title class_">He</span>(e,t+<span class="number">1</span>,o,!<span class="number">0</span>,!<span class="number">0</span>,!<span class="number">0</span>)&amp;&amp;((l=<span class="literal">null</span>!==e.<span class="property">tag</span>&amp;&amp;<span class="string">&quot;?&quot;</span>!==e.<span class="property">tag</span>||e.<span class="property">dump</span>&amp;&amp;e.<span class="property">dump</span>.<span class="property">length</span>&gt;<span class="number">1024</span>)&amp;&amp;(e.<span class="property">dump</span>&amp;&amp;<span class="number">10</span>===e.<span class="property">dump</span>.<span class="title function_">charCodeAt</span>(<span class="number">0</span>)?u+=<span class="string">&quot;?&quot;</span>:u+=<span class="string">&quot;? &quot;</span>),u+=e.<span class="property">dump</span>,l&amp;&amp;(u+=<span class="title class_">Fe</span>(e,t)),<span class="title class_">He</span>(e,t+<span class="number">1</span>,c,!<span class="number">0</span>,l)&amp;&amp;(e.<span class="property">dump</span>&amp;&amp;<span class="number">10</span>===e.<span class="property">dump</span>.<span class="title function_">charCodeAt</span>(<span class="number">0</span>)?u+=<span class="string">&quot;:&quot;</span>:u+=<span class="string">&quot;: &quot;</span>,p+=u+=e.<span class="property">dump</span>));e.<span class="property">tag</span>=_,e.<span class="property">dump</span>=p||<span class="string">&quot;&#123;&#125;&quot;</span>&#125;(e,t,e.<span class="property">dump</span>,i),_&amp;&amp;(e.<span class="property">dump</span>=<span class="string">&quot;&amp;ref_&quot;</span>+p+e.<span class="property">dump</span>)):(!<span class="keyword">function</span>(<span class="params">e,t,n</span>)&#123;<span class="keyword">var</span> r,i,a,o,s,c=<span class="string">&quot;&quot;</span>,l=e.<span class="property">tag</span>,u=<span class="title class_">Object</span>.<span class="title function_">keys</span>(n);<span class="keyword">for</span>(r=<span class="number">0</span>,i=u.<span class="property">length</span>;r&lt;i;r+=<span class="number">1</span>)s=<span class="string">&quot;&quot;</span>,<span class="string">&quot;&quot;</span>!==c&amp;&amp;(s+=<span class="string">&quot;, &quot;</span>),e.<span class="property">condenseFlow</span>&amp;&amp;(s+=<span class="string">&#x27;&quot;&#x27;</span>),o=n[a=u[r]],e.<span class="property">replacer</span>&amp;&amp;(o=e.<span class="property">replacer</span>.<span class="title function_">call</span>(n,a,o)),<span class="title class_">He</span>(e,t,a,!<span class="number">1</span>,!<span class="number">1</span>)&amp;&amp;(e.<span class="property">dump</span>.<span class="property">length</span>&gt;<span class="number">1024</span>&amp;&amp;(s+=<span class="string">&quot;? &quot;</span>),s+=e.<span class="property">dump</span>+(e.<span class="property">condenseFlow</span>?<span class="string">&#x27;&quot;&#x27;</span>:<span class="string">&quot;&quot;</span>)+<span class="string">&quot;:&quot;</span>+(e.<span class="property">condenseFlow</span>?<span class="string">&quot;&quot;</span>:<span class="string">&quot; &quot;</span>),<span class="title class_">He</span>(e,t,o,!<span class="number">1</span>,!<span class="number">1</span>)&amp;&amp;(c+=s+=e.<span class="property">dump</span>));e.<span class="property">tag</span>=l,e.<span class="property">dump</span>=<span class="string">&quot;&#123;&quot;</span>+c+<span class="string">&quot;&#125;&quot;</span>&#125;(e,t,e.<span class="property">dump</span>),_&amp;&amp;(e.<span class="property">dump</span>=<span class="string">&quot;&amp;ref_&quot;</span>+p+<span class="string">&quot; &quot;</span>+e.<span class="property">dump</span>));<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;[object Array]&quot;</span>===l)r&amp;&amp;<span class="number">0</span>!==e.<span class="property">dump</span>.<span class="property">length</span>?(e.<span class="property">noArrayIndent</span>&amp;&amp;!o&amp;&amp;t&gt;<span class="number">0</span>?<span class="title class_">Ve</span>(e,t-<span class="number">1</span>,e.<span class="property">dump</span>,i):<span class="title class_">Ve</span>(e,t,e.<span class="property">dump</span>,i),_&amp;&amp;(e.<span class="property">dump</span>=<span class="string">&quot;&amp;ref_&quot;</span>+p+e.<span class="property">dump</span>)):(!<span class="keyword">function</span>(<span class="params">e,t,n</span>)&#123;<span class="keyword">var</span> r,i,a,o=<span class="string">&quot;&quot;</span>,s=e.<span class="property">tag</span>;<span class="keyword">for</span>(r=<span class="number">0</span>,i=n.<span class="property">length</span>;r&lt;i;r+=<span class="number">1</span>)a=n[r],e.<span class="property">replacer</span>&amp;&amp;(a=e.<span class="property">replacer</span>.<span class="title function_">call</span>(n,<span class="title class_">String</span>(r),a)),(<span class="title class_">He</span>(e,t,a,!<span class="number">1</span>,!<span class="number">1</span>)||<span class="keyword">void</span> <span class="number">0</span>===a&amp;&amp;<span class="title class_">He</span>(e,t,<span class="literal">null</span>,!<span class="number">1</span>,!<span class="number">1</span>))&amp;&amp;(<span class="string">&quot;&quot;</span>!==o&amp;&amp;(o+=<span class="string">&quot;,&quot;</span>+(e.<span class="property">condenseFlow</span>?<span class="string">&quot;&quot;</span>:<span class="string">&quot; &quot;</span>)),o+=e.<span class="property">dump</span>);e.<span class="property">tag</span>=s,e.<span class="property">dump</span>=<span class="string">&quot;[&quot;</span>+o+<span class="string">&quot;]&quot;</span>&#125;(e,t,e.<span class="property">dump</span>),_&amp;&amp;(e.<span class="property">dump</span>=<span class="string">&quot;&amp;ref_&quot;</span>+p+<span class="string">&quot; &quot;</span>+e.<span class="property">dump</span>));<span class="keyword">else</span>&#123;<span class="keyword">if</span>(<span class="string">&quot;[object String]&quot;</span>!==l)&#123;<span class="keyword">if</span>(<span class="string">&quot;[object Undefined]&quot;</span>===l)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">if</span>(e.<span class="property">skipInvalid</span>)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title function_">s</span>(<span class="string">&quot;unacceptable kind of an object to dump &quot;</span>+l)&#125;<span class="string">&quot;?&quot;</span>!==e.<span class="property">tag</span>&amp;&amp;<span class="title class_">Ne</span>(e,e.<span class="property">dump</span>,t,a,u)&#125;<span class="literal">null</span>!==e.<span class="property">tag</span>&amp;&amp;<span class="string">&quot;?&quot;</span>!==e.<span class="property">tag</span>&amp;&amp;(c=<span class="built_in">encodeURI</span>(<span class="string">&quot;!&quot;</span>===e.<span class="property">tag</span>[<span class="number">0</span>]?e.<span class="property">tag</span>.<span class="title function_">slice</span>(<span class="number">1</span>):e.<span class="property">tag</span>).<span class="title function_">replace</span>(<span class="regexp">/!/g</span>,<span class="string">&quot;%21&quot;</span>),c=<span class="string">&quot;!&quot;</span>===e.<span class="property">tag</span>[<span class="number">0</span>]?<span class="string">&quot;!&quot;</span>+<span class="attr">c</span>:<span class="string">&quot;tag:yaml.org,2002:&quot;</span>===c.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">18</span>)?<span class="string">&quot;!!&quot;</span>+c.<span class="title function_">slice</span>(<span class="number">18</span>):<span class="string">&quot;!&lt;&quot;</span>+c+<span class="string">&quot;&gt;&quot;</span>,e.<span class="property">dump</span>=c+<span class="string">&quot; &quot;</span>+e.<span class="property">dump</span>)&#125;<span class="keyword">return</span>!<span class="number">0</span>&#125;<span class="keyword">function</span> <span class="title function_">Je</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n,r,i=[],a=[];<span class="keyword">for</span>(<span class="title class_">Qe</span>(e,i,a),n=<span class="number">0</span>,r=a.<span class="property">length</span>;n&lt;r;n+=<span class="number">1</span>)t.<span class="property">duplicates</span>.<span class="title function_">push</span>(i[a[n]]);t.<span class="property">usedDuplicates</span>=<span class="keyword">new</span> <span class="title class_">Array</span>(r)&#125;<span class="keyword">function</span> <span class="title function_">Qe</span>(<span class="params">e,t,n</span>)&#123;<span class="keyword">var</span> r,i,a;<span class="keyword">if</span>(<span class="literal">null</span>!==e&amp;&amp;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> e)<span class="keyword">if</span>(-<span class="number">1</span>!==(i=t.<span class="title function_">indexOf</span>(e)))-<span class="number">1</span>===n.<span class="title function_">indexOf</span>(i)&amp;&amp;n.<span class="title function_">push</span>(i);<span class="keyword">else</span> <span class="keyword">if</span>(t.<span class="title function_">push</span>(e),<span class="title class_">Array</span>.<span class="title function_">isArray</span>(e))<span class="keyword">for</span>(i=<span class="number">0</span>,a=e.<span class="property">length</span>;i&lt;a;i+=<span class="number">1</span>)<span class="title class_">Qe</span>(e[i],t,n);<span class="keyword">else</span> <span class="keyword">for</span>(i=<span class="number">0</span>,a=(r=<span class="title class_">Object</span>.<span class="title function_">keys</span>(e)).<span class="property">length</span>;i&lt;a;i+=<span class="number">1</span>)<span class="title class_">Qe</span>(e[r[i]],t,n)&#125;<span class="keyword">function</span> <span class="title function_">Xe</span>(<span class="params">e,t</span>)&#123;<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Function yaml.&quot;</span>+e+<span class="string">&quot; is removed in js-yaml 4. Use yaml.&quot;</span>+t+<span class="string">&quot; instead, which is now safe by default.&quot;</span>)&#125;&#125;<span class="keyword">const</span> et=&#123;<span class="title class_">Type</span>:f,<span class="title class_">Schema</span>:g,<span class="attr">FAILSAFE_SCHEMA</span>:w,<span class="title class_">JSON</span><span class="attr">_SCHEMA</span>:P,<span class="attr">CORE_SCHEMA</span>:j,<span class="attr">DEFAULT_SCHEMA</span>:N,<span class="attr">load</span>:ke.<span class="property">load</span>,<span class="attr">loadAll</span>:ke.<span class="property">loadAll</span>,<span class="attr">dump</span>:&#123;<span class="attr">dump</span>:<span class="keyword">function</span>(<span class="params">e,t</span>)&#123;<span class="keyword">var</span> n=<span class="keyword">new</span> <span class="title class_">Ie</span>(t=t||&#123;&#125;);n.<span class="property">noRefs</span>||<span class="title class_">Je</span>(e,n);<span class="keyword">var</span> r=e;<span class="keyword">return</span> n.<span class="property">replacer</span>&amp;&amp;(r=n.<span class="property">replacer</span>.<span class="title function_">call</span>(&#123;<span class="string">&quot;&quot;</span>:r&#125;,<span class="string">&quot;&quot;</span>,r)),<span class="title class_">He</span>(n,<span class="number">0</span>,r,!<span class="number">0</span>,!<span class="number">0</span>)?n.<span class="property">dump</span>+<span class="string">&quot;\n&quot;</span>:<span class="string">&quot;&quot;</span>&#125;&#125;.<span class="property">dump</span>,<span class="title class_">YAMLException</span>:s,<span class="attr">types</span>:&#123;<span class="attr">binary</span>:F,<span class="attr">float</span>:v,<span class="attr">map</span>:b,<span class="attr">null</span>:E,<span class="attr">pairs</span>:K,<span class="attr">set</span>:Z,<span class="attr">timestamp</span>:x,<span class="attr">bool</span>:A,<span class="attr">int</span>:O,<span class="attr">merge</span>:I,<span class="attr">omap</span>:W,<span class="attr">seq</span>:y,<span class="attr">str</span>:m&#125;,<span class="attr">safeLoad</span>:<span class="title class_">Xe</span>(<span class="string">&quot;safeLoad&quot;</span>,<span class="string">&quot;load&quot;</span>),<span class="attr">safeLoadAll</span>:<span class="title class_">Xe</span>(<span class="string">&quot;safeLoadAll&quot;</span>,<span class="string">&quot;loadAll&quot;</span>),<span class="attr">safeDump</span>:<span class="title class_">Xe</span>(<span class="string">&quot;safeDump&quot;</span>,<span class="string">&quot;dump&quot;</span>)&#125;&#125;,<span class="number">147</span>:<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;e.<span class="property">exports</span>=&#123;<span class="attr">i8</span>:<span class="string">&quot;2.8.1&quot;</span>&#125;&#125;&#125;,__webpack_module_cache__=&#123;&#125;;<span class="keyword">function</span> <span class="title function_">__webpack_require__</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> t=__webpack_module_cache__[e];<span class="keyword">if</span>(<span class="keyword">void</span> <span class="number">0</span>!==t)<span class="keyword">return</span> t.<span class="property">exports</span>;<span class="keyword">var</span> n=__webpack_module_cache__[e]=&#123;<span class="attr">exports</span>:&#123;&#125;&#125;;<span class="keyword">return</span> __webpack_modules__[e](n,n.<span class="property">exports</span>,__webpack_require__),n.<span class="property">exports</span>&#125;__webpack_require__.<span class="property">d</span>=<span class="function">(<span class="params">e,t</span>)=&gt;</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n <span class="keyword">in</span> t)__webpack_require__.<span class="title function_">o</span>(t,n)&amp;&amp;!__webpack_require__.<span class="title function_">o</span>(e,n)&amp;&amp;<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,n,&#123;<span class="attr">enumerable</span>:!<span class="number">0</span>,<span class="attr">get</span>:t[n]&#125;)&#125;,__webpack_require__.<span class="property">o</span>=<span class="function">(<span class="params">e,t</span>)=&gt;</span><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(e,t);<span class="keyword">var</span> __webpack_exports__=&#123;&#125;;(<span class="function">()=&gt;</span>&#123;<span class="string">&quot;use strict&quot;</span>;<span class="keyword">var</span> _handle_main_js__WEBPACK_IMPORTED_MODULE_0__=<span class="title function_">__webpack_require__</span>(<span class="number">755</span>),_package_json__WEBPACK_IMPORTED_MODULE_1__=<span class="title function_">__webpack_require__</span>(<span class="number">147</span>),_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__=<span class="title function_">__webpack_require__</span>(<span class="number">70</span>),_chenyfan_cache_db__WEBPACK_IMPORTED_MODULE_3__=<span class="title function_">__webpack_require__</span>(<span class="number">385</span>);_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">s</span>(<span class="string">`ClientWorker<span class="subst">$&#123;_package_json__WEBPACK_IMPORTED_MODULE_1__.i8&#125;</span> Started!`</span>);<span class="keyword">const</span> db=<span class="keyword">new</span> _chenyfan_cache_db__WEBPACK_IMPORTED_MODULE_3__;db.<span class="title function_">read</span>(<span class="string">&quot;hotpatch&quot;</span>).<span class="title function_">then</span>((<span class="function"><span class="params">script</span>=&gt;</span>&#123;script?(_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">s</span>(<span class="string">&quot;Hotpatch Loaded!&quot;</span>),<span class="built_in">eval</span>(script)):_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">w</span>(<span class="string">&quot;Hotpatch Not Found!&quot;</span>)&#125;)),db.<span class="title function_">read</span>(<span class="string">&quot;config&quot;</span>).<span class="title function_">then</span>((<span class="function"><span class="params">config</span>=&gt;</span>&#123;config=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(config)||&#123;&#125;,<span class="built_in">setInterval</span>((<span class="function">()=&gt;</span>&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">s</span>(<span class="string">`ClientWorker@<span class="subst">$&#123;_package_json__WEBPACK_IMPORTED_MODULE_1__.i8&#125;</span> Start to Clean Expired Cache!`</span>),caches.<span class="title function_">open</span>(<span class="string">&quot;ClientWorker_ResponseCache&quot;</span>).<span class="title function_">then</span>((<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="title function_">keys</span>().<span class="title function_">then</span>((<span class="function"><span class="params">t</span>=&gt;</span>&#123;t.<span class="title function_">forEach</span>((<span class="function"><span class="params">t</span>=&gt;</span>&#123;e.<span class="title function_">match</span>(t).<span class="title function_">then</span>((<span class="function"><span class="params">n</span>=&gt;</span>&#123;<span class="title class_">Number</span>(n.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&quot;ClientWorker_ExpireTime&quot;</span>))&lt;=(<span class="keyword">new</span> <span class="title class_">Date</span>).<span class="title function_">getTime</span>()&amp;&amp;e.<span class="title function_">delete</span>(t)&#125;))&#125;))&#125;))&#125;))&#125;),<span class="built_in">eval</span>(config.<span class="property">cleaninterval</span>)||<span class="number">6e4</span>)&#125;)),<span class="title function_">addEventListener</span>(<span class="string">&quot;fetch&quot;</span>,(<span class="function"><span class="params">e</span>=&gt;</span>&#123;e.<span class="title function_">respondWith</span>(self.<span class="title function_">clientworkerhandle</span>(e.<span class="property">request</span>))&#125;)),<span class="title function_">addEventListener</span>(<span class="string">&quot;install&quot;</span>,(<span class="keyword">function</span>(<span class="params"></span>)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">s</span>(<span class="string">`ClientWorker@<span class="subst">$&#123;_package_json__WEBPACK_IMPORTED_MODULE_1__.i8&#125;</span> Installed!`</span>),self.<span class="title function_">skipWaiting</span>()&#125;)),<span class="title function_">addEventListener</span>(<span class="string">&quot;activate&quot;</span>,(<span class="keyword">function</span>(<span class="params"></span>)&#123;_utils_cons_js__WEBPACK_IMPORTED_MODULE_2__.<span class="property">Z</span>.<span class="title function_">s</span>(<span class="string">`ClientWorker@<span class="subst">$&#123;_package_json__WEBPACK_IMPORTED_MODULE_1__.i8&#125;</span> Activated!`</span>),self.<span class="property">clients</span>.<span class="title function_">claim</span>()&#125;))&#125;)()&#125;)();</span><br></pre></td></tr></table></figure>

<h2 id="写入配置"><a href="#写入配置" class="headerlink" title="写入配置"></a>写入配置</h2><h3 id="放置配置文件"><a href="#放置配置文件" class="headerlink" title="放置配置文件"></a>放置配置文件</h3><ol>
<li>在<code>source</code>下创建一个名为<code>config.yaml</code>的文件</li>
<li>在<code>主目录下的config.yml</code>文件进行配置</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;config.yaml&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="原始配置"><a href="#原始配置" class="headerlink" title="原始配置"></a>原始配置</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">ClientWorker</span></span><br><span class="line"><span class="attr">catch_rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">rule:</span> <span class="string">_</span></span><br><span class="line">    <span class="attr">transform_rules:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">search:</span> <span class="string">\#.+</span></span><br><span class="line">        <span class="attr">searchin:</span> <span class="string">url</span></span><br><span class="line">        <span class="attr">replace:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">search:</span> <span class="string">_</span></span><br><span class="line">        <span class="attr">action:</span> <span class="string">fetch</span></span><br><span class="line">        <span class="attr">fetch:</span></span><br><span class="line">          <span class="attr">engine:</span> <span class="string">fetch</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">search:</span> <span class="string">(^4|^5)</span></span><br><span class="line">        <span class="attr">searchin:</span> <span class="string">status</span></span><br><span class="line">        <span class="attr">action:</span> <span class="string">return</span></span><br><span class="line">        <span class="attr">return:</span></span><br><span class="line">          <span class="attr">body:</span> <span class="string">The</span> <span class="string">GateWay</span> <span class="string">is</span> <span class="string">down!This</span> <span class="string">Page</span> <span class="string">is</span> <span class="string">provided</span> <span class="string">by</span> <span class="string">ClientWorker!</span></span><br><span class="line">          <span class="attr">status:</span> <span class="number">503</span></span><br></pre></td></tr></table></figure>

<h3 id="部分功能配置"><a href="#部分功能配置" class="headerlink" title="部分功能配置"></a>部分功能配置</h3><h4 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">rule:</span> <span class="string">^https\:\/\/((cdn|fastly|gcore|test1|quantil)\.jsdelivr\.net\/npm|unpkg\.com)</span></span><br><span class="line">  <span class="attr">transform_rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">search:</span> <span class="string">_</span></span><br><span class="line">      <span class="attr">replace:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">_</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://unpkg.zhimg.com</span> <span class="comment">#回源已关闭，原缓存有效</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdn.cnortles.top/npm</span> <span class="comment">#2022/7/12 确认关闭回源，缓存有效</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://code.bdstatic.com/npm</span> <span class="comment">#确认关闭回源，缓存有效</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://npm.sourcegcdn.com</span> <span class="comment">#滥用封仓库，强制数字版本号</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdn.bilicdn.tk/npm</span> <span class="comment"># 由GamerNoTitle提供的反代，请勿滥用:D</span></span><br></pre></td></tr></table></figure>

<h4 id="cdnjs"><a href="#cdnjs" class="headerlink" title="cdnjs"></a>cdnjs</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">rule:</span> <span class="string">^https\:\/\/cdnjs\.cloudflare\.com\/ajax\/libs</span></span><br><span class="line">  <span class="attr">transform_rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">search:</span> <span class="string">_</span></span><br><span class="line">      <span class="attr">replace:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">_</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdn.bootcdn.net/ajax/libs</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://lib.baomitu.com</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://mirrors.cqupt.edu.cn/cdnjs/ajax/libs</span> <span class="comment"># 重庆邮电</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdn.staticfile.org</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://mirrors.sustech.edu.cn/cdnjs/ajax/libs</span> <span class="comment"># 南大</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">https://cdnjs.sourcegcdn.com/ajax/libs</span> <span class="comment"># 全同步 https://cdnjs.cloudflare.com</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">rule:</span> <span class="string">^https\:\/\/(cdn|fastly|gcore|test1|quantil)\.jsdelivr\.net\/gh</span></span><br><span class="line">  <span class="attr">transform_rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">search:</span> <span class="string">_</span></span><br><span class="line">      <span class="attr">replace:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">_</span></span><br><span class="line"><span class="string">//镜像站点自己选择</span></span><br></pre></td></tr></table></figure>

<h2 id="放置安装文件"><a href="#放置安装文件" class="headerlink" title="放置安装文件"></a>放置安装文件</h2><h3 id="文件地址"><a href="#文件地址" class="headerlink" title="文件地址"></a>文件地址</h3><p><del>随便放</del>不管放在哪,<code>引入</code>最重要(越靠前越好)</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">type=&quot;text/javascript&quot;</span> <span class="string">src=&quot;/**/js/ClientWorker.js&quot;</span> <span class="string">&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="类型介绍"><a href="#类型介绍" class="headerlink" title="类型介绍"></a>类型介绍</h3><blockquote>
<p>共有三种方式接入： 三文件全域安装 、 自定义无刷新安装 、 自定义刷新安装</p>
<p>其中，全域安装最简单，对 SEO 支持也最恶劣（Google 会提示额外的计算开销，而百度完全没办法爬取）。比较适用于自用的、只追求速度的。自定义无刷新安装则对你的 HTML 和 JS 水平有所要求，对于部分不遵守标准的浏览器兼容性较差，但是这种方法对 SEO 没有影响，比较适合于对 seo 注重的网站。自定义刷新安装对 seo 略有影响，会在载入后阻断未经 CW 的请求并刷新一次，以便于 CW 及时托管，比较适合于网站提速</p>
</blockquote>
<h3 id="自定义无刷新安装"><a href="#自定义无刷新安装" class="headerlink" title="自定义无刷新安装"></a>自定义无刷新安装</h3><blockquote>
<p>这种方式有一个重载的动作，即在无刷新的情况下将当前页面重新获取并填充。这可能会出现意外的兼容性错误，请慎行。 如果你不需要重载，请将下方重载标识框内的代码删除。不重载的后果就是用户首屏的大部分请求无法被 CW 拦截。如果你希望用户首屏进入就被托管，请使用’自定义刷新安装’</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!!navigator.<span class="property">serviceWorker</span>) &#123;</span><br><span class="line">  navigator.<span class="property">serviceWorker</span></span><br><span class="line">    .<span class="title function_">register</span>(<span class="string">&quot;/cw.js?t=&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">async</span> (registration) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;cw_installed&quot;</span>) !== <span class="string">&quot;true&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">conf</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;[CW] 注册成功...&quot;</span>);</span><br><span class="line">          <span class="title function_">fetch</span>(<span class="string">&quot;/cw-cgi/api?type=config&quot;</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">text</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (text === <span class="string">&quot;ok&quot;</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;[CW] 安装成功...&quot;</span>);</span><br><span class="line">                <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;cw_installed&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">                <span class="comment">//如果你不希望重载页面，请移除下面七行</span></span><br><span class="line">                <span class="comment">//重载标识 - 开始</span></span><br><span class="line">                <span class="title function_">fetch</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>)</span><br><span class="line">                  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="title function_">text</span>())</span><br><span class="line">                  .<span class="title function_">then</span>(<span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">document</span>.<span class="title function_">open</span>();</span><br><span class="line">                    <span class="variable language_">document</span>.<span class="title function_">write</span>(text);</span><br><span class="line">                    <span class="variable language_">document</span>.<span class="title function_">close</span>();</span><br><span class="line">                  &#125;);</span><br><span class="line">                <span class="comment">//重载标识 - 结束</span></span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;[CW] 安装完成，重新加载...&quot;</span>);</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="title function_">conf</span>();</span><br><span class="line">                &#125;, <span class="number">200</span>);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;[CW] 唔~安装可能还没有结束,请等待... ....&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">conf</span>();</span><br><span class="line">        &#125;, <span class="number">50</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;[CW] 呀~安装失败: &quot;</span> + err.<span class="property">message</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;[CW] 您的浏览器不支持 service worker&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义刷新安装"><a href="#自定义刷新安装" class="headerlink" title="自定义刷新安装"></a>自定义刷新安装</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">if</span> (!!navigator.<span class="property">serviceWorker</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;cw_installed&#x27;</span>) !== <span class="string">&#x27;true&#x27;</span>) &#123;<span class="variable language_">window</span>.<span class="title function_">stop</span>();&#125;</span><br><span class="line">    navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;/cw.js?t=&#x27;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()).<span class="title function_">then</span>(<span class="keyword">async</span> (registration) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;cw_installed&#x27;</span>) !== <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="title function_">conf</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CW] Installing Success,Configuring...&#x27;</span>);</span><br><span class="line">                <span class="title function_">fetch</span>(<span class="string">&#x27;/cw-cgi/api?type=config&#x27;</span>)</span><br><span class="line">                    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">text</span>())</span><br><span class="line">                    .<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (text === <span class="string">&#x27;ok&#x27;</span>) &#123;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CW] Installing Success,Configuring Success,Starting...&#x27;</span>);</span><br><span class="line">                            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;cw_installed&#x27;</span>, <span class="string">&#x27;true&#x27;</span>);</span><br><span class="line">                            <span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">reload</span>();</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;[CW] Installing Success,Configuring Failed,Sleeping 200ms...&#x27;</span>);</span><br><span class="line">                            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                                <span class="title function_">conf</span>()</span><br><span class="line">                            &#125;, <span class="number">200</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[CW] Installing Success,Configuring Error,Exiting...&#x27;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">conf</span>()</span><br><span class="line">            &#125;, <span class="number">50</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[CW] Installing Failed,Error: &#x27;</span> + err.<span class="property">message</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[CW] Installing Failed,Error: Browser not support service worker&#x27;</span>); &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>剩下功能,请前往官网查看<a target="_blank" rel="noopener external nofollow noreferrer" href="https://clientworker.js.org/rule/">@传送门</a></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.cnortles.top/0.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.cnortles.top/0.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">归</div><div class="post-copyright__author_desc">crl</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.cnortles.top/posts/2f9e4e02.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.cnortles.top/posts/2f9e4e02.html')">提升文章速度(多镜像)</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.cnortles.top/posts/2f9e4e02.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=提升文章速度(多镜像)&amp;url=https://www.cnortles.top/posts/2f9e4e02.html&amp;pic=https://project.cnortles.top/file/img/cover/cover_15.bmp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.cnortles.top" target="_blank">垂天云</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>笔记<span class="tagsPageCount">4</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://cdn.cnortles.top/0.webp" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cnortles.top/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cnortles.top/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/5e2be96e.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://twikoo.js.org/assets/logo.5707582f.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">twikoo服务器部署</div></div></a></div><div class="next-post pull-right"><a href="/posts/c472e3a.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">原神文案分享|第一弹</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>猜你喜欢</span></div><div class="relatedPosts-list"><div><a href="/posts/5e2be96e.html" title="twikoo服务器部署"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://twikoo.js.org/assets/logo.5707582f.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-27</div><div class="title">twikoo服务器部署</div></div></a></div><div><a href="/posts/txwdbase.html" title="腾讯文档基础使用"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-10-06</div><div class="title">腾讯文档基础使用</div></div></a></div><div><a href="/posts/f5ea3af7.html" title="钉钉在线课堂使用"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-07-21</div><div class="title">钉钉在线课堂使用</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)" rel="external nofollow noreferrer">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-top" title="点击展开"><div class="card-info-avatar"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.cnortles.top/0.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="writing_hand" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/270d.png">✍️</g-emoji><span>on Studying</span></div></div></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">归</h1><div class="author-info__desc">crl</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/cnortles" rel="external nofollow noreferrer" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=cnortles@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=1792572437&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" rel="external nofollow noreferrer" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ1"></use></svg></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ClientWorker-%E8%83%BD%E5%B9%B2%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">ClientWorker 能干什么？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.</span> <span class="toc-text">创建文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5"><span class="toc-number">2.1.1.</span> <span class="toc-text">外部链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0"><span class="toc-number">2.1.2.</span> <span class="toc-text">本地</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">写入配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%BE%E7%BD%AE%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.1.</span> <span class="toc-text">放置配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8B%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.2.</span> <span class="toc-text">原始配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%8A%9F%E8%83%BD%E9%85%8D%E7%BD%AE"><span class="toc-number">2.2.3.</span> <span class="toc-text">部分功能配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NPM"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">NPM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cdnjs"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">cdnjs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GitHub"><span class="toc-number">2.2.3.3.</span> <span class="toc-text">GitHub</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%BE%E7%BD%AE%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">放置安装文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%9C%B0%E5%9D%80"><span class="toc-number">2.3.1.</span> <span class="toc-text">文件地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.3.2.</span> <span class="toc-text">类型介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A0%E5%88%B7%E6%96%B0%E5%AE%89%E8%A3%85"><span class="toc-number">2.3.3.</span> <span class="toc-text">自定义无刷新安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%B7%E6%96%B0%E5%AE%89%E8%A3%85"><span class="toc-number">2.3.4.</span> <span class="toc-text">自定义刷新安装</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E5%B0%BE"><span class="toc-number">3.</span> <span class="toc-text">结尾</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/txwdbase.html" title="腾讯文档基础使用">腾讯文档基础使用</a><time datetime="2022-10-06T14:26:43.000Z" title="发表于 2022-10-06 22:26:43">2022-10-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c0c10c33.html" title="常见激素|高中生物"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.cnortles.top/cover/capture_20221003114758821.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常见激素|高中生物"/></a><div class="content"><a class="title" href="/posts/c0c10c33.html" title="常见激素|高中生物">常见激素|高中生物</a><time datetime="2022-10-03T02:05:22.000Z" title="发表于 2022-10-03 10:05:22">2022-10-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5d1e3b24.html" title="魔改记录"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="魔改记录"/></a><div class="content"><a class="title" href="/posts/5d1e3b24.html" title="魔改记录">魔改记录</a><time datetime="2022-09-04T05:53:42.000Z" title="发表于 2022-09-04 13:53:42">2022-09-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c472e3a.html" title="原神文案分享|第一弹"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="原神文案分享|第一弹"/></a><div class="content"><a class="title" href="/posts/c472e3a.html" title="原神文案分享|第一弹">原神文案分享|第一弹</a><time datetime="2022-09-04T05:50:42.000Z" title="发表于 2022-09-04 13:50:42">2022-09-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2f9e4e02.html" title="提升文章速度(多镜像)"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://project.cnortles.top/file/img/cover/cover_15.bmp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="提升文章速度(多镜像)"/></a><div class="content"><a class="title" href="/posts/2f9e4e02.html" title="提升文章速度(多镜像)">提升文章速度(多镜像)</a><time datetime="2022-08-27T12:14:04.000Z" title="发表于 2022-08-27 20:14:04">2022-08-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:crl@cnortles.eu.org" rel="external nofollow noreferrer" title="email"><i class="anzhiyufont anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://weibo.com/u/6378063631" title="微博"><i class="anzhiyufont anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.facebook.com/profile.php?id=100092208016287&amp;sk=about" title="facebook"><i class="anzhiyufont anzhiyufont anzhiyu-icon-facebook1"></i></a><img class="footer_mini_logo" title="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.cnortles.top/0.webp" size="50px"/><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/anzhiyu-c" title="Github"><i class="anzhiyufont anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://space.bilibili.com/372204786" title="Bilibili"><i class="anzhiyufont anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener external nofollow noreferrer" href="https://v.douyin.com/DwCpMEy/" title="抖音"><i class="anzhiyufont anzhiyufont anzhiyu-icon-tiktok"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener external nofollow noreferrer" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener external nofollow noreferrer" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" rel="external nofollow noreferrer" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2022 - 2023 By <a class="footer-bar-link" href="/" title="归" target="_blank">归</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/" title="豫ICP备2022002852号-1">豫ICP备2022002852号-1</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.cnortles.top/0.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="fas fa-archive faa-tada"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="fas fa-shapes faa-tada"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="fas fa-tags faa-tada"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="fas fa-link faa-tada"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="fas fa-envelope faa-tada"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="fas fa-music faa-tada"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg><span> 追番页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()" rel="external nofollow noreferrer"><i class="fas fa-shoe-prints faa-tada"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 0.88rem;">API<sup>2</sup></a><a href="/tags/IP/" style="font-size: 0.88rem;">IP<sup>1</sup></a><a href="/tags/PHP/" style="font-size: 0.88rem;">PHP<sup>2</sup></a><a href="/tags/butterfly/" style="font-size: 0.88rem;">butterfly<sup>2</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>2</sup></a><a href="/tags/hexo/" style="font-size: 0.88rem;">hexo<sup>4</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>1</sup></a><a href="/tags/js/" style="font-size: 0.88rem;">js<sup>1</sup></a><a href="/tags/yuque/" style="font-size: 0.88rem;">yuque<sup>1</sup></a><a href="/tags/%E5%85%AC%E7%9B%8A/" style="font-size: 0.88rem;">公益<sup>1</sup></a><a href="/tags/%E5%8E%9F%E7%A5%9E/" style="font-size: 0.88rem;">原神<sup>1</sup></a><a href="/tags/%E5%8F%8D%E4%BB%A3/" style="font-size: 0.88rem;">反代<sup>1</sup></a><a href="/tags/%E5%AD%97%E4%BD%93/" style="font-size: 0.88rem;">字体<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">学习<sup>5</sup></a><a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 0.88rem;">建站<sup>1</sup></a><a href="/tags/%E6%96%87%E6%A1%88/" style="font-size: 0.88rem;">文案<sup>1</sup></a><a href="/tags/%E6%96%87%E7%AB%A0/" style="font-size: 0.88rem;">文章<sup>3</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/" style="font-size: 0.88rem;">更新日志<sup>1</sup></a><a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 0.88rem;">源码<sup>2</sup></a><a href="/tags/%E7%89%A9%E7%90%86/" style="font-size: 0.88rem;">物理<sup>3</sup></a><a href="/tags/%E7%94%9F%E7%89%A9/" style="font-size: 0.88rem;">生物<sup>2</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 0.88rem;">笔记<sup>4</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 0.88rem;">编程<sup>2</sup></a><a href="/tags/%E8%A7%86%E9%A2%91%E8%A7%A3%E6%9E%90/" style="font-size: 0.88rem;">视频解析<sup>1</sup></a><a href="/tags/%E8%B5%84%E6%BA%90/" style="font-size: 0.88rem;">资源<sup>2</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E6%8E%A8%E8%8D%90/" style="font-size: 0.88rem;">软件推荐<sup>1</sup></a><a href="/tags/%E9%AB%98%E4%B8%AD/" style="font-size: 0.88rem;">高中<sup>2</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7274050897" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/7274050897&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="https://unpkg.com/hexo-theme-anzhiyu/source/js/utils.js"></script><script src="https://unpkg.com/hexo-theme-anzhiyu/source/js/main.js"></script><script src="https://unpkg.com/hexo-theme-anzhiyu/source/js/tw_cn.js"></script><script src="https://cdn.cnortles.top/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cnortles.top/npm/instant.page/instantpage.js" type="module"></script><script src="https://cdn.cnortles.top/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.cnortles.top/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cnortles.top/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script>var meting_api = "https://api.cnortles.top/meting/?server=:server&type=:type&id=:id&auth=:auth&r=:r";
</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="https://unpkg.com/hexo-theme-anzhiyu/source/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cnortles.top/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.cnortles.top/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cnortles.top/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.cnortles.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.cnortles.top/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cnortles.top/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@cnortles.top";</script><script async data-pjax src="https://unpkg.com/hexo-theme-anzhiyu/source/js/anzhiyu/comment_barrage.js"></script><script async data-pjax src="https://cdn.cnortles.top/npm/anzhiyu-theme-static/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cnortles.top/npm/anzhiyu-theme-static/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cnortles.top/npm/anzhiyu-theme-static/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cnortles.top/npm/anzhiyu-blog-static/js/APlayer.min.js"></script><script src="https://cdn.cnortles.top/npm/hexo-anzhiyu-music/assets/js/Meting2.min.js"></script><script src="https://cdn.cnortles.top/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cnortles.top/npm/anzhiyu-theme-static/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>